;/*FB_PKG_DELIM*/

__d("AudioClipsBrowserBlockMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("73");b=d("FalcoLoggerInternal").create("audio_clips_browser_block_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsCancelledByUserFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("39");b=d("FalcoLoggerInternal").create("audio_clips_cancelled_by_user",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogNotnowMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("74");b=d("FalcoLoggerInternal").create("audio_clips_dialog_notnow_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogOkMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("75");b=d("FalcoLoggerInternal").create("audio_clips_dialog_ok_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsMicAccessCheckFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("76");b=d("FalcoLoggerInternal").create("audio_clips_mic_access_check_failed",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackPauseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("44");b=d("FalcoLoggerInternal").create("audio_clips_playback_pause",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackResumeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("45");b=d("FalcoLoggerInternal").create("audio_clips_playback_resume",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("47");b=d("FalcoLoggerInternal").create("audio_clips_playback_start",a);e=b;g["default"]=e}),98);
__d("AudioClipsStartRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("51");b=d("FalcoLoggerInternal").create("audio_clips_start_recording_click",a);e=b;g["default"]=e}),98);
__d("AudioClipsStopRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("52");b=d("FalcoLoggerInternal").create("audio_clips_stop_recording_click",a);e=b;g["default"]=e}),98);
__d("MessageFeedbackType",[],(function(a,b,c,d,e,f){a=Object.freeze({POSITIVE:0,NEGATIVE:1});f["default"]=a}),66);
__d("LSSubmitMessageFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("feedback_type",a[0]),d[0].set("message_id",a[1]),d[0].set("page_id",a[2]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_message_feedback",c.i64.cast([0,811]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitMessageFeedbackStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSubmitMessageFeedbackStoredProcedure",["LSSubmitMessageFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSubmitMessageFeedback"),e.feedbackType,e.messageId,e.pageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("useSubmitBusinessMessageFeedbackAction",["LSFactory","LSIntEnum","LSSubmitMessageFeedbackStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(j||d("react")).useCallback;function a(a,b,e,g){var j=d("react-compiler-runtime").c(6),k=(h||(h=c("useReStore")))(),l;j[0]!==g||j[1]!==k||j[2]!==e||j[3]!==a||j[4]!==b?(l=function(){c("promiseDone")(k.runInTransaction(function(f){return c("LSSubmitMessageFeedbackStoredProcedure")(c("LSFactory")(f),{feedbackType:(i||(i=d("LSIntEnum"))).ofNumber(e),messageId:a,pageId:b})},"readwrite",void 0,void 0,f.id+":38"),g)},j[0]=g,j[1]=k,j[2]=e,j[3]=a,j[4]=b,j[5]=l):l=j[5];return l}g["default"]=a}),98);
__d("useBusinessMessageNegativeFeedback",["fbt","MessageFeedbackType","react-compiler-runtime","useGenAiFeedbackSubmittedToast","useSubmitBusinessMessageFeedbackAction"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=d("react-compiler-runtime").c(3),e=c("useGenAiFeedbackSubmittedToast")(a);a=c("useSubmitBusinessMessageFeedbackAction")(a==null?void 0:a.messageId,a==null?void 0:a.senderId,c("MessageFeedbackType").NEGATIVE,e);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Z\u0142a odpowied\u017a"),b[0]=e):e=b[0];e=e;b[1]!==a?(e=[a,e],b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),226);
__d("BusinessMessageNegativeFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useBusinessMessageNegativeFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useBusinessMessageNegativeFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("useBusinessMessagePositiveFeedback",["fbt","MessageFeedbackType","react-compiler-runtime","useGenAiFeedbackSubmittedToast","useSubmitBusinessMessageFeedbackAction"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=d("react-compiler-runtime").c(3),e=c("useGenAiFeedbackSubmittedToast")(a);a=c("useSubmitBusinessMessageFeedbackAction")(a==null?void 0:a.messageId,a==null?void 0:a.senderId,c("MessageFeedbackType").POSITIVE,e);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Dobra odpowied\u017a"),b[0]=e):e=b[0];e=e;b[1]!==a?(e=[a,e],b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),226);
__d("BusinessMessagePositiveFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useBusinessMessagePositiveFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useBusinessMessagePositiveFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("CDSToast.react",["fbt","BaseToast.react","CDSThemeConfig","CometThemeInfraUtils","MetaBrandXFilled24Icon.react","XMDSIcon.react","XMDSIconButton.react","XMDSText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={header:{marginBottom:"x1e56ztr",$$css:!0},link:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",wordBreak:"xdnwjd9",$$css:!0}};b={margin20:{marginBottom:"xieb3on",$$css:!0},margin32:{marginBottom:"x1iymm2a",$$css:!0},margin48:{marginBottom:"x13ihpsm",$$css:!0},margin64:{marginBottom:"x16bybu0",$$css:!0}};var l={20:b.margin20,32:b.margin32,48:b.margin48,64:b.margin64};function a(a){var b=d("react-compiler-runtime").c(20),e=a.action,f=a.addOnStart,g=a.density,i=a.header,o=a.message,p=a.offsetFooter,q=a.onDismiss,r=a.ref,s=a.size,t=a.testid;a=a.withoutCloseButton;s=s===void 0?"full-width":s;a=a===void 0?!1:a;var u;b[0]!==e||b[1]!==q?(u=e!=null?{label:e.label,labelRenderer:n,onPress:function(a){e.onPress(a,e.dismissToastOnPress===!0?q:m)},testid:e.testid}:void 0,b[0]=e,b[1]=q,b[2]=u):u=b[2];var v;b[3]!==q||b[4]!==a?(v=!a&&j.jsx(c("XMDSIconButton.react"),{"aria-label":h._(/*BTDS*/"Zamknij"),onPress:q,children:j.jsx(c("XMDSIcon.react"),{color:"toast-DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",icon:c("MetaBrandXFilled24Icon.react"),size:24})}),b[3]=q,b[4]=a,b[5]=v):v=b[5];b[6]!==i||b[7]!==o?(a=function(a){a=a.toastMessageId;return j.jsxs("div",{className:"x78zum5 xdt5ytf",id:a,children:[i!=null&&j.jsx(c("XMDSText.react"),{color:"toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",textStyle:"bodyEmphasized",xstyle:k.header,children:i}),j.jsx(c("XMDSText.react"),{color:"toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",textStyle:"body",children:o})]})},b[6]=i,b[7]=o,b[8]=a):a=b[8];p=p&&l[p];var w;b[9]!==f||b[10]!==g||b[11]!==q||b[12]!==r||b[13]!==s||b[14]!==u||b[15]!==v||b[16]!==a||b[17]!==p||b[18]!==t?(w=j.jsx(c("BaseToast.react"),{action:u,addOnStart:f,closeButton:v,density:g,message:a,offsetStyles:p,onDismiss:q,size:s,testid:void 0,themeConfigOverride:d("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()?void 0:c("CDSThemeConfig"),toastRef:r}),b[9]=f,b[10]=g,b[11]=q,b[12]=r,b[13]=s,b[14]=u,b[15]=v,b[16]=a,b[17]=p,b[18]=t,b[19]=w):w=b[19];return w}function m(){}function n(a){return j.jsx(c("XMDSText.react"),{color:"toastTextLink",textStyle:"body",xstyle:k.link,children:a})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ChangeVoteFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5497");b=d("FalcoLoggerInternal").create("change_vote",a);e=b;g["default"]=e}),98);
__d("CreatorMessagingRecipientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4151");b=d("FalcoLoggerInternal").create("creator_messaging_recipient",a);e=b;g["default"]=e}),98);
__d("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24052353867781136"}),null);
__d("EBMessageRangeQueryWithPersistenceQuery.graphql",["EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},d={defaultValue:null,kind:"LocalArgument",name:"restore_type"},e=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],f={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},l=[g,h];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},f,g,h,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_tags",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[i,f,g,h,j,k],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[i,f,g,h,j,k,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supplemental_otid",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_not_found",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"),metadata:{},name:"EBMessageRangeQueryWithPersistenceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EBMessageRangeQueryWithPersistence",["Base64Utils","EBAPIConvertNativeToLS","EBAPIDecryptionModule","EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBDeriveAndStoreEpochs","EBGetClientState","EBMessageRangeQueryUtils","EBMessageRangeQueryWithPersistenceQuery.graphql","I64","LSDatabaseSingleton","LSEncryptedBackupsMessagesRangeQueryDirection","LSIntEnum","LSMEBTaskCreationSource","LSVec","MAWCurrentUser","MAWEBRestoreTrackingUtils","MAWJids","MAWJobDefinitions","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActThreadLifecycleState__DO_NOT_USE","QPLFlow","WAHashStringToNumber","WAJids","WAResultOrError","WATagsLogger","WorkerRelay","WorkerRelayNetwork","getErrorSafe","handleRestoreMessagesGraphQLResponse","justknobx","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=c("requireDeferred")("LSEBUnifiedRestoreUtils").__setRef("EBMessageRangeQueryWithPersistence"),w=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("EBMessageRangeQueryWithPersistence"),x=c("requireDeferred")("LSRestoreProtobufs.nop").__setRef("EBMessageRangeQueryWithPersistence"),y=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryWithPersistence"]),z=h!==void 0?h:h=b("EBMessageRangeQueryWithPersistenceQuery.graphql");async function a(a){var b=a.chatJid,e=a.direction,g=a.includeOffset;g=g===void 0?!1:g;var h=a.numMessages,p=a.sortOrderMs,q=a.source,r=a.traceId;if(d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql");var u=d("WAHashStringToNumber").hashStringToNumber(r),v=c("qpl")._(521471755,"2586"),w=d("QPLFlow").startQPLFlow(v,{annotations:{bool:{mainThreadRestore:!0,workerThreadRestore:!1},int:{num_messages_requested:h,source:q!=null?q:c("LSMEBTaskCreationSource").UNKNOWN},string:{request_args:JSON.stringify(a)}},instanceKey:u,timeoutInMs:c("justknobx")._("2950")});try{y.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[","] Issuing messageRangeQuery with args: ",""])),r,JSON.stringify(a));d("MAWEBRestoreTrackingUtils").markEBRestorePaginated(q,r,"GQL_MAIN_THREAD");var x=await (s||(s=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue(),C;await x.runInTransaction(async function(a){var c;w.addPoint("get_client_state_start");C=await d("EBGetClientState").getClientState(x,a);d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{device_id:(t||(t=d("I64"))).to_string((c=(c=C)==null?void 0:c.device_id)!=null?c:(t||(t=d("I64"))).zero)}},pointName:"client_state_retrieved",traceId:r});w.addPoint("get_client_state_end",{string:{device_id:t.to_string((c=(c=C)==null?void 0:c.device_id)!=null?c:(t||(t=d("I64"))).zero)}});c=await d("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"GQL_range_restore_eb_api_call");if(c.type===d("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW||c.type===d("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD){d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:c.type}},pointName:"chat_jid_not_found_in_act_mapping_table",traceId:r});w.addPoint("chat_jid_not_found_in_act_mapping_table");d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(r,!1);w.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.thread.missing.error");return d("WAResultOrError").makeError("thread-not-found-in-mi-act-mapping-table")}else d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:c.type}},pointName:"chat_jid_exists_in_act_mapping_table",traceId:r}),w.addPoint("chat_jid_exists_in_act_mapping_table")},"readwrite",void 0,void 0,f.id+":173");if(C==null){y.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["No client state found - unable to restore"])));w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("no-client-state")}v=C;u=v.backupId;a=v.device_id;var D=v.locally_available_epochs,E=v.mailboxRootKey;v=v.ocmfClientStateBlob;if(u==null||a==null||E==null||v==null){y.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["mandatory params of client state are null"])));w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,"client_state_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var F=d("MAWCurrentUser").getAppID();d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"app_id_retrieved",traceId:r});w.addPoint("app_id_retrieved");var G=d("WAJids").threadIdForChatJid(b);d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"converted_chatjid_to_threadid",traceId:r});w.addPoint("converted_chatjid_to_threadid");e=e==="before"?c("LSEncryptedBackupsMessagesRangeQueryDirection").BEFORE:c("LSEncryptedBackupsMessagesRangeQueryDirection").AFTER;a={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(G),site:"www",tam_thread_subtype:0},success:babelHelpers.extends({device_context:{device_id:(t||(t=d("I64"))).to_string(a),locally_available_epochs:D,raw_tokens:{mailbox_root_key:d("Base64Utils").fromArrayBuffer(E),ocmf_client_state_blob:d("Base64Utils").fromArrayBuffer(v)}},direction:e,include_offset:g,query_num_messages:h,server_thread_key:G},p!=null?{reference_timestamp:d("EBMessageRangeQueryUtils").safeTimestampMsString(p)}:{})};w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START);d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_start",traceId:r});var H;try{await d("WorkerRelayNetwork").createWorkerNetworkExecute(),H=await d("WorkerRelay").createWorkerQuery(z,{app_id:String(F!=null?F:"0"),restore_payload_string:JSON.stringify(a),restore_type:"RANGE_QUERY_RESTORE"}),w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_end",traceId:r})}catch(a){D=c("getErrorSafe")(a);w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,errorStackTrace:D.stack}});return d("WAResultOrError").makeError("invalid-graphql-response")}if(H==null||((E=H)==null||(E=E.viewer)==null||(E=E.encrypted_backup)==null?void 0:E.mailbox)==null){w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}e=(v=H)==null||(v=v.viewer)==null||(v=v.encrypted_backup)==null||(v=v.mailbox)==null?void 0:v.messages;if(e==null){y.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["GQL worker range restore query returned null for message response"])));w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}g=e;if((g==null?void 0:g.encrypted_messages)==null){w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,"null_messages");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}h=g.backup_id;G=g.encrypted_messages;F=g.epoch_derivation_set;a=g.exception_string;D=g.message_range_info;E=g.should_delete_mailbox;v=g.thread_not_found;w.addAnnotations({bool:{should_delete_mailbox:E!=null?E:!1},int:{response_messages:G.length},string:{message_range_info:JSON.stringify(D)}});if(a!=null){y.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["server side exception during graphql restore - ",""])),a);if(v!=null&&v){w.addPoint("thread_not_found_on_server");d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"thread_not_found_on_server",traceId:r});w.endSuccess();d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(r,!1);return d("WAResultOrError").makeError("thread-not-found-on-server")}E===!0&&(w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"delete_mailbox",traceId:r}));w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:a}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{exception:a}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("server-side-exception")}w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START);await d("EBDeriveAndStoreEpochs").deriveAndStoreEpochsNonLS(x,F);w.addAnnotations({bool:{hasEpochs:F!=null&&F.epoch_edges.length>0}});w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END);h==null&&(y.WARN(n||(n=babelHelpers.taggedTemplateLiteralLoose(["backup_id is null during graphQL restore"]))),w.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"backup_id_null",traceId:r}));e=await A(x,b,G,h!=null?h:(t||(t=d("I64"))).to_string(u),D,r,w);if(e.success===!1)return e;B(x,b,e.value,p,q,r);return d("WAResultOrError").makeResult()}catch(a){g=c("getErrorSafe")(a);y.ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""])),g);w.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,errorStackTrace:(v=g.stack)!=null?v:""}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(r,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").DEPRECATED_makeError("runtime-error",g)}}async function A(a,b,e,f,g,h,i){var j=d("WAHashStringToNumber").hashStringToNumber(h),k=c("qpl")._(521471755,"2586");e.length===0&&(y.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["No messages to restore"]))),i.addAnnotations({bool:{hasMessagesToRestore:!1}}),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"no_messages",traceId:h}));if(g==null){y.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["message range info is null - cannot proceed with graphQL restore"])));i.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(h,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}var l=g.has_more_after,m=g.has_more_before,n=g.next_message_timestamp_ms_after;g=g.next_message_timestamp_ms_before;if(m==null||l==null||n==null||g==null){y.ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["message range info is not complete - cannot proceed with graphQL restore"])));i.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(h,!1,"message_range_info_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}if(e.length===0){i.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_MESSAGES_TO_RESTORE);i.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.success");return d("WAResultOrError").makeResult({echo:[],messageRangeInfo:{has_more_after:l,has_more_before:m,next_message_timestamp_ms_after:n,next_message_timestamp_ms_before:g},protobuf:[]})}h=d("handleRestoreMessagesGraphQLResponse").processMessageArray(e,f,k,j);e=h.encryptedLSEchoMessages;f=h.encryptedMessagesWithProtobufs;k=h.encryptedNonLSEchoMessages;j=h.encryptedNonLSProtobufs;i.addAnnotations({bool:{hasEchoMessages:e.length>0,hasProtobufMessages:f.length>0}});i.addPoint("native_decryption_start");h=d("WAJids").threadIdForChatJid(b);e=await d("EBAPIDecryptionModule").decryptUsingNativeJS(a,h,j,k);if(!e.success){i.endFail("native_decryption_error",{string:{error_description:"native_decryption_error"}});return d("WAResultOrError").makeError("native-decryption-error")}f=e.value.decryptedEchoMessages;b=e.value.decryptedProtobufs;a=d("EBAPIConvertNativeToLS").convertNativeDecryptionResponseToDecryptedMessageType(f,b);i.addPoint("native_decryption_success");i.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.success");return d("WAResultOrError").makeResult({echo:c("LSVec").toArray(a.echo),messageRangeInfo:{has_more_after:l,has_more_before:m,next_message_timestamp_ms_after:n,next_message_timestamp_ms_before:g},protobuf:c("LSVec").toArray(a.protobuf)})}function B(a,b,e,g,h,i){var j=e.echo,k=e.messageRangeInfo,l=e.protobuf,m=d("WAJids").threadIdForChatJid(b);j.length>0&&l.length>0?c("promiseDone")(v.load().then(function(a){return a.echoProtobufConsolidatedRestoreHelper(m,c("LSVec").ofArray(l),k.has_more_before,(t||(t=d("I64"))).of_string(k.next_message_timestamp_ms_before),k.has_more_after,t.of_string(k.next_message_timestamp_ms_after),!1,i,g,void 0,c("LSVec").ofArray(j),(u||(u=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)})):j.length>0?c("promiseDone")(w.load().then(function(e){return a.runInTransaction(function(a){return e(a,0,(t||(t=d("I64"))).zero,c("LSVec").ofArray(j),k.has_more_before,t.of_string(k.next_message_timestamp_ms_before),k.has_more_after,t.of_string(k.next_message_timestamp_ms_after),!1,m,i,g,(u||(u=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)},"readwrite",void 0,void 0,f.id+":742")})):c("promiseDone")(x.load().then(function(e){return a.runInTransaction(function(a){return e(a,0,m,c("LSVec").ofArray(l),k.has_more_before,(t||(t=d("I64"))).of_string(k.next_message_timestamp_ms_before),k.has_more_after,t.of_string(k.next_message_timestamp_ms_after),!1,i,g,void 0,c("LSVec").ofArray([]),(u||(u=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)},"readwrite",void 0,void 0,f.id+":765")}))}g.query=z;g.messageRangeQueryWithPersistence_DEPRECATED_DO_NOT_USE=a}),98);
__d("EbFetchTimeoutMsForMLv2",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("justknobx")._("3074")}g["default"]=a}),98);
__d("ExistingPollSubmitErrorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5498");b=d("FalcoLoggerInternal").create("existing_poll_submit_error",a);e=b;g["default"]=e}),98);
__d("ExistingPollSubmitSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5499");b=d("FalcoLoggerInternal").create("existing_poll_submit_success",a);e=b;g["default"]=e}),98);
__d("GroupPollEvent",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({START_NEW_POLL:"start_new_poll",SUBMIT_NEW_POLL:"submit_new_poll",NEW_POLL_SUBMIT_ERROR:"new_poll_submit_error",NEW_POLL_SUBMIT_SUCCESS:"new_poll_submit_success",OPEN_EXISTING_POLL:"open_existing_poll",CHANGE_VOTE:"change_vote",SHOW_VOTERS:"show_voters",SUBMIT_EXISTING_POLL:"submit_existing_poll",EXISTING_POLL_SUBMIT_ERROR:"existing_poll_submit_error",EXISTING_POLL_SUBMIT_SUCCESS:"existing_poll_submit_success"});c=a;f["default"]=c}),66);
__d("LSDeleteMessageStoredProcedure",["LSDeleteMessage","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeleteMessage"),e.threadKey,e.messageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSEBUnifiedRestoreUtils",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSProtobufRestoreHandler","LSVec","MAWAsyncEBPendingQueryPromise","MAWBridgeSafeActionsWorkerAndUI","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","MWEBODSEntityName.enum","MWEBODSUtils","WATagsLogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n;async function a(a,b,e,f,g,o,p,q,r,s,t,u,v){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["starting eb restore - ",""])),q!=null?q:"no_request_id");d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"unified_restore");var w=[].concat(d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(b));t=d("LSProtobufRestoreHandler").convertLSEchoMessageVecToArray(t);t=await d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:v,encodedEchoMessages:t});w.push.apply(w,t);d("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(w,"protobuf_restore");if(q!=null)try{d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start_unified",traceId:q});t=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());t=d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(w,a,void 0,t);if(e===!0&&t.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:q});b=b!=null?c("LSVec").toArray(b).length:0;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""])),b)}d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(q,{echoMessages:void 0,hasMoreAfter:g,hasMoreBefore:e,isPointQuery:p,messages:t,nextMessageTimestampMsBefore:f,protobufMessages:w,referenceTimestamp:r,requestId:q,restoreType:"protobuf",threadId:a})}catch(a){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["eb restore native op - Failed to decode protobufs, with error: ",""])),a.message)}e===!0&&w.length===0&&(q!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:q}),d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no messages but hasMoreBefore is true"]))));b=u!=null&&(n||(n=d("LSIntEnum"))).unwrapIntEnum(u)===c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(b){q!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:q});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(q);return Promise.resolve()}t=u!=null&&(n||(n=d("LSIntEnum"))).unwrapIntEnum(u)===c("LSMEBTaskCreationSource").MSGR_DYI;if(t){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"])));await d("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(a,w,e,f);q!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:q});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(q);return Promise.resolve()}c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),w,e,f,g,o,p,q,r,s,void 0,u,void 0,v),function(){q!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end_unified",traceId:q})},function(a){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",q!=null?q:"no_request_id"]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - Failed to restore protobufs, with error: ",""])),a.message);a={string:{error:a.message}};q!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(q,!1,"native_op_reject_unified",a)});return Promise.resolve()}g.echoProtobufConsolidatedRestoreHelper=a}),98);
__d("LSOptimisticSetOrUnsetPinnedMessage",["LSIssueNewTask","LSShimThreadPinMessage.nop","LSShimThreadUnpinMessage.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.i64.eq(a[3],c.i64.cast([0,1]))||c.i64.eq(a[3],c.i64.cast([0,2]))?c.sequence([function(d){return c.nativeOperation(b("LSShimThreadPinMessage.nop"),a[0],a[2],a[1])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("armadillo_thread_key",a[1]),d[2].set("offline_threading_id",a[0]),d[2].set("timestamp_ms",a[2]),d[2].set("sync_group",d[0]),d[3]=d[2].get("timestamp_ms"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),["e2ee_pin_msg","_",c.i64.to_string(d[3])].join(""),c.i64.cast([0,1010]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(d){return c.nativeOperation(b("LSShimThreadUnpinMessage.nop"),a[0],a[1])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("armadillo_thread_key",a[1]),d[2].set("offline_threading_id",a[0]),d[2].set("timestamp_ms",a[2]),d[2].set("sync_group",d[0]),d[3]=d[2].get("timestamp_ms"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),["e2ee_unpin_msg","_",c.i64.to_string(d[3])].join(""),c.i64.cast([0,1011]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxOptimisticSetOrUnsetPinnedMessageStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticSetOrUnsetPinnedMessageStoredProcedure",["LSOptimisticSetOrUnsetPinnedMessage","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSetOrUnsetPinnedMessage"),e.offlineThreadingId,e.threadKey,e.timestampMs,e.state);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticSetPinnedMessage",["LSIssueNewTaskWithExtraOperations","LSSetPinnedMessage"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.i64.eq(a[3],c.i64.cast([0,2]))?c.storedProcedure(b("LSSetPinnedMessage"),a[0],a[1],a[2],c.i64.cast([0,1])):c.storedProcedure(b("LSSetPinnedMessage"),a[0],a[1],a[2],a[3])},function(e){return c.i64.eq(a[3],c.i64.cast([0,2]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[0].set("pinned_location",c.i64.cast([0,1])),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))):c.i64.eq(a[3],c.i64.cast([0,1]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[0].set("should_replace_oldest_pin",a[4]),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))):c.i64.eq(a[3],c.i64.cast([0,0]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),["unpin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,431]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))):c.resolve(0)}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSetPinnedMessageStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSOptimisticSetPinnedMessageStoredProcedure",["LSOptimisticSetPinnedMessage","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSetPinnedMessage"),e.threadKey,e.messageId,e.pinnedTimestampMs,e.state,e.shouldReplaceOldestPin);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSPinnedMessageState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_PINNED:0,PINNED:1,PINNED_AND_FEATURED:2});f["default"]=a}),66);
__d("LSReportMessageInCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[7]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[8]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[7],d[8],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("message_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("thread_key"),d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(d[4]),c.i64.cast([0,374]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxReportMessageInCommunityChannelStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSReportMessageInCommunityChannelStoredProcedure",["LSReportMessageInCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSReportMessageInCommunityChannel"),e.threadKey,e.messageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("Ls1lcFeatureOpenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("153");b=d("FalcoLoggerInternal").create("ls_1lc_feature_open",a);e=b;g["default"]=e}),98);
__d("MWRestoreMessagesFromEB",["EBIsEbEnabled","EBMessageRangeQueryWithPersistence","I64","MAWAsyncEBPendingQueryPromise","MAWMainTraceUtils","MWEncryptedBackUpEBNotEnabledError","Promise","WATagsLogger","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var e=a.chatJid,f=a.newerNumMessages,g=a.passedTraceId,k=a.sortOrderMs,l=a.source;a=a.storage;if(!c("gkx")("23914"))return null;var m=g!=null?g:d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("EBIsEbEnabled").isEbEnabledLS(a.tables).then(function(a){if(a)return d("EBMessageRangeQueryWithPersistence").messageRangeQueryWithPersistence_DEPRECATED_DO_NOT_USE({chatJid:e,direction:(j||(j=d("I64"))).to_float(f)>0?"after":"before",includeOffset:c("gkx")("5340"),sortOrderMs:(j||(j=d("I64"))).to_string(k),source:l,traceId:m}).then(function(a){a.success||d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(m,c("err")(a.error))});else{d("WATagsLogger").TAGS(["labyrinth_web","eb_restore"]).WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Issuing message range query for chatJid: "," skipped. EB not enabled"])),e);d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(m,c("err")(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED));return(i||(i=b("Promise"))).resolve()}}));return m}g["default"]=a}),98);
__d("MAWEBFetch",["EBFormatUtils","FBLogger","I64","LSMEBTaskCreationSource","MAWAsyncEBPendingQueryPromise","MWEncryptedBackUpEBNotEnabledError","MWRestoreMessagesFromEB","WAResultOrError","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;b=c("justknobx")._("3177");var i=Math.max(3,b-5);async function a(a){var b=a.chatJid,e=a.count,f=a.db,g=a.direction,i=a.timestampMs;a=a.traceId;e=d("EBFormatUtils").adjustCount(e,g);var k=e[0];e=e[1];b=c("MWRestoreMessagesFromEB")({chatJid:b,newerNumMessages:(h||(h=d("I64"))).of_int32(e),numMessages:h.of_int32(k),passedTraceId:a,sortOrderMs:d("EBFormatUtils").adjustTs(i,g),source:c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION,storage:f});if(b==null)return d("WAResultOrError").makeResult({hasMoreAfter:!1,hasMoreBefore:!1,isEndOfCurrentFormat:!1,messages:[],restoreType:"none"});e=d("MAWAsyncEBPendingQueryPromise").getWaitForRestorePromiseFromTrace(b);k=await e.then(function(a){return d("WAResultOrError").makeResult(a)}).catch(function(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)return d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED);c("FBLogger")("messenger_web").catching(a).mustfix("[EBFetch] Failed to fetch");return d("WAResultOrError").makeError((a=a==null?void 0:a.message)!=null?a:"unknown")});if(k.success===!1)return k;a=k.value;i=a.hasMoreAfter;f=a.hasMoreBefore;b=a.messages;e=a.restoreType;return d("WAResultOrError").makeResult({hasMoreAfter:i,hasMoreBefore:f,isEndOfCurrentFormat:j(g,i,f,b),messages:b,restoreType:e})}function j(a,b,c,d){if(a==="before"&&c===!1)return!1;return a==="after"&&b===!1?!1:d.length<i}g.default=a}),98);
__d("useTriggerEditAction",["MAWEditMessageContext.react","MWPActor.react","MWPReplyContext.react","react","react-compiler-runtime","useLogMAWEditMessage"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(11),g=c("useLogMAWEditMessage")(),h=i(d("MAWEditMessageContext.react").Context),j=h.setEditMessageData;h=i(d("MWPReplyContext.react").MWPReplyContext);var k=h.clearReply,l=h.reply,m=d("MWPActor.react").useActor();f[0]!==m||f[1]!==k||f[2]!==g||f[3]!==a.messageId||f[4]!==a.threadKey||f[5]!==a.timestampMs||f[6]!==e||f[7]!==l||f[8]!==j||f[9]!==b?(h=function(){l!=null&&k(a.threadKey,!0),j({messageId:a.messageId,threadKey:a.threadKey,threadType:b,timestampMs:a.timestampMs}),g(b,a.threadKey,a.messageId,m,"EDIT_MESSAGE_TAP"),e==null||e()},f[0]=m,f[1]=k,f[2]=g,f[3]=a.messageId,f[4]=a.threadKey,f[5]=a.timestampMs,f[6]=e,f[7]=l,f[8]=j,f[9]=b,f[10]=h):h=f[10];return h}g["default"]=a}),98);
__d("MAWEditMenuItem.react",["fbt","MWXMenuItem.react","react","react-compiler-runtime","useTriggerEditAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.disableReason,f=a.message,g=a.onEditClickCallback;a=a.threadType;var i=g===void 0?null:g,k=c("useTriggerEditAction")(f,a);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Edytuj"),b[0]=g):g=b[0];f=g;a=e!==void 0;b[1]!==i||b[2]!==k?(g=function(){k(),i&&i()},b[1]=i,b[2]=k,b[3]=g):g=b[3];b[4]!==e||b[5]!==a||b[6]!==g?(f=j.jsx(c("MWXMenuItem.react"),{"aria-label":f,disabled:a,onClick:g,primaryText:f,secondaryText:e,testid:void 0}),b[4]=e,b[5]=a,b[6]=g,b[7]=f):f=b[7];return f}g["default"]=a}),226);
__d("MAWMessageIntegrityChecker",["FBLogger","MAWMessagesCompare","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a.externalId===b.externalId)return 0;if(a.sortOrderMs>b.sortOrderMs)return 1;return a.sortOrderMs<b.sortOrderMs?-1:-1}function i(a,b){var c=b.reduce(function(a,b){b.externalId!=null&&a.set(b.externalId,b.sortOrderMs);return a},new Map());return a.map(function(a){var b;return babelHelpers.extends({},a,{sortOrderMs:(b=a.externalId!=null?c.get(a.externalId):null)!=null?b:a.sortOrderMs})}).sort(d("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc"))}function j(a,b,c){a=new Set(a.map(function(a){return a.externalId}).filter(Boolean));return b.toSorted(d("MAWMessagesCompare").makeCompareMessageMetadataForDescOrderFn(a)).slice(0,c)}function a(a,b,d,e,f){var g=new Set(a.map(function(a){return a.externalId})),l=new Set(b.map(function(a){return a.externalId})),m=k(g,l);l=k(l,g);g=i(a,b);a=j(g,b,d);b=0;var n=0,o=0,p=0,q=[],r=null;while(b<g.length&&n<a.length){var s=g[b],t=a[n];if(r!=null&&h(t,r)===0){n+=1;r=t;c("FBLogger")("messenger_web_missing_messages").mustfix("Detected duplicate messages in reference. Target source: %s, reference source: %s",e,f);continue}var u=h(s,t);u===0?(b+=1,n+=1,r=t,q.push([s,{result:"consistent"}])):u<0?(n+=1,r=t,o+=1,q.push([t,{result:"missing_in_target"}])):(b+=1,p+=1,q.push([s,{result:"missing_in_reference"}]))}while(b<g.length){u=g[b];b+=1;a.length<d?(p+=1,q.push([u,{result:"missing_in_reference"}])):q.push([u,{result:"skipped_in_target"}])}while(n<a.length){t=a[n];n+=1;g.length<d?(o+=1,q.push([t,{result:"missing_in_target"}])):q.push([t,{result:"skipped_in_reference"}])}if(o===0&&p===0)return{detailedResults:q,result:"consistent",setDifferenceInReference:l,setDifferenceInTarget:m};else if(o>0&&p===0)return{detailedResults:q,numOfMissingMessages:o,result:"missing_in_target",setDifferenceInReference:l,setDifferenceInTarget:m};else if(o===0&&p>0)return{detailedResults:q,numOfMissingMessages:p,result:"missing_in_reference",setDifferenceInReference:l,setDifferenceInTarget:m};else return{detailedResults:q,numOfMissingMessages:p+o,result:"missing_in_both",setDifferenceInReference:l,setDifferenceInTarget:m}}async function b(a,b,d){a=d.filter(function(a){a[0];a=a[1];return a.result==="missing_in_target"}).map(function(a){var b=a[0];a[1];return b.externalId});var e={admin:!1,editMsgHistory:!1,media:!1,polls:!1,reactions:!1,receiverFetch:!1,xma:!1},f=await b.fetchMessagesByExternalId(a,e),g=new Set(f.map(function(a){return a.externalId}));return Promise.all(d.map(async function(a){var b=a[0];a=a[1];if(!g.has(b.externalId))return[b,a];a=f.find(function(a){return a.externalId===b.externalId});if(!a){c("FBLogger")("messenger_web_missing_messages").mustfix("Failed to find msg with external id: %s in MAW",b.externalId);return[b,{result:"missing_in_target_invalid_sortOrder"}]}var d={sortOrderSkewMs:a.sortOrderMs-b.sortOrderMs,sortOrderSkewNumberOfMsg:0},e={result:"missing_in_target_invalid_sortOrder",sortOrderSkewMs:0};d.sortOrderSkewNumberOfMsg!=null&&(e=babelHelpers.extends({},e,{sortOrderSkewNumberOfMsg:d.sortOrderSkewNumberOfMsg}));return[babelHelpers.extends({},b,{msgType:a.msgType}),e]}))}async function e(a,b){var c=b.filter(function(a){a[0];a=a[1];return a.result==="missing_in_target"}).map(function(a){var b=a[0];a[1];return b.externalId});if(c.length===0)return b;c=c.map(function(b){return d("ReQL").fromTableAscending(a.tables.messages.index("optimistic")).getKeyRange(b)});var e=c.length===1;c=c.length>1?d("ReQL").union.apply(void 0,c):c[0];var f=await d("ReQL").toArrayAsync(c);return b.map(function(a){var b=a[0];a=a[1];var c=f.find(function(a){return a.offlineThreadingId===b.externalId});if(c!=null)return[b,{result:"missing_in_target_exists_in_lsdb",transportKey:c.transportKey,wouldHaveThrownS518614:e}];a.wouldHaveThrownS518614=e;return[b,a]})}function k(a,b){var c=0;for(a of a)b.has(a)||(c+=1);return c}g.checkIntegrityforMessageList=a;g.checkMsgsExistenceInMAWAndDecomposeTargetConsistencyResult=b;g.checkMsgsExistenceInLSDB=e}),98);
__d("MAWMessageIntegrityMissingInTargetCategory",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.hasEBFetchFailed,c=a.mawVsEB;a=a.uiVsEB;var d=i(a);a=c.detailedResults.filter(function(a){var b=a[0];a[1];return d.has(b.externalId)});return a.map(function(a){var c=a[0];a=a[1];a=h(c.externalId,a,b);return a==null?null:[c,a]}).filter(Boolean)}function h(a,b,d){switch(b.result){case"consistent":return"client_inconsistency";case"missing_in_target":return d?"eb_restore_timeout":"message_not_persisted_after_eb_restore";case"missing_in_target_invalid_sortOrder":return b.sortOrderSkewMs==null||b.sortOrderSkewMs===0?"message_out_of_order_same_timestamp":"message_out_of_order_different_timestamp";case"skipped_in_target":return"client_inconsistency_skipped";case"skipped_in_reference":return"unknown_skipped";case"missing_in_reference":case"missing_in_target_exists_in_lsdb":c("FBLogger")("messenger_web_missing_messages").mustfix("Unexpected consistency result %s for message with externalId %s when calculating missing in target category",b.result,a);return null;default:b.result;return null}}function i(a){return a.detailedResults.reduce(function(a,b){var c=b[0];b=b[1];b.result==="missing_in_target"&&a.add(c.externalId);return a},new Set())}g.calculateMissingInTargetCategory=a}),98);
__d("MAWMessageIntegrityCompareMessagesData",["I64","MAWMessageIntegrityChecker","MAWMessageIntegrityMissingInTargetCategory","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("WATagsLogger").TAGS(["MissingMessages"]);async function a(a,b,c,d,e,f){var g=e.S518614_messagesBacktest,h=g.backendMessages,i=g.ebMessages,j=g.mpsMessages;g=g.uiMessages;var k=e.S518614_pageSizeBacktest,l=e.messages,n=l.backendMessages,o=l.ebMessages,p=l.mpsMessages;l=l.uiMessages;e=e.pageSize;n=await m(a,b,c,d,f,n,o,p,l,e);o=n.mawVsEB;p=n.missingInTargetCategory;l=n.mpsVsEB;var q=n.mpsVsMaw,r=n.uiVsEB;n=n.uiVsMaw;a=await m(a,b,c,d,f,h,i,j,g,k,!0);b=a.mawVsEB;c=a.mpsVsEB;d=a.mpsVsMaw;f=a.uiVsEB;h=a.uiVsMaw;i=a.wouldHaveThrownS518614;return{S518614_mawVsEB:b,S518614_mpsVsEB:c,S518614_mpsVsMaw:d,S518614_pageSize:k,S518614_uiVsEB:f,S518614_uiVsMaw:h,S518614_wouldHaveThrown:i,mawVsEB:o,missingInTargetCategory:p,mpsVsEB:l,mpsVsMaw:q,pageSize:e,uiVsEB:r,uiVsMaw:n}}async function m(a,b,c,e,f,g,m,o,p,q,r){r===void 0&&(r=!1);var s=d("MAWMessageIntegrityChecker").checkIntegrityforMessageList(p,g,q,"ui","maw"),t=d("MAWMessageIntegrityChecker").checkIntegrityforMessageList(p,m,q,"ui","eb"),u=d("MAWMessageIntegrityChecker").checkIntegrityforMessageList(g,m,q,"maw","eb");g=o?d("MAWMessageIntegrityChecker").checkIntegrityforMessageList(o,g,q,"mps","maw"):null;o=o?d("MAWMessageIntegrityChecker").checkIntegrityforMessageList(o,m,q,"mps","eb"):null;t.result!=="consistent"&&(!r?l.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing message detected for ",", result: ",", num of messages missing: ",""])),(k||(k=d("I64"))).to_float(e),t.result,t.numOfMissingMessages):l.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["S518614 backtest: Missing message detected for ",", result: ",", num of messages missing: ",""])),(k||(k=d("I64"))).to_float(e),t.result,t.numOfMissingMessages));(t.result==="missing_in_target"||t.result==="missing_in_both")&&(t.detailedResults=n(t.detailedResults,p));(u.result==="missing_in_target"||u.result==="missing_in_both")&&(u.detailedResults=await d("MAWMessageIntegrityChecker").checkMsgsExistenceInMAWAndDecomposeTargetConsistencyResult(c,b,u.detailedResults));var v=!1;if(s.result==="missing_in_target"||s.result==="missing_in_both")try{s.detailedResults=await d("MAWMessageIntegrityChecker").checkMsgsExistenceInLSDB(a,s.detailedResults),s.detailedResults.map(function(a){a[0];a=a[1];v||(v=a.wouldHaveThrownS518614===!0)})}catch(a){l.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to get detailed results for UI vs MAW comparison: ",""])),a)}m=d("MAWMessageIntegrityMissingInTargetCategory").calculateMissingInTargetCategory({hasEBFetchFailed:f,mawVsEB:u,uiVsEB:t});return{mawVsEB:u,missingInTargetCategory:m,mpsVsEB:o,mpsVsMaw:g,pageSize:q,uiVsEB:t,uiVsMaw:s,wouldHaveThrownS518614:v}}function n(a,b){var c=new Set(b.map(function(a){return a.externalId}));return a.map(function(a){var b=a[0];a=a[1];return a.result==="missing_in_target"&&c.has(b.externalId)?[b,babelHelpers.extends({},a,{existingInUISamePage:!0})]:[b,a]})}g.compareMessagesData=a}),98);
__d("MAWMessageIntegrityFetchMessagesData",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWEBDeanonFetch","MAWMessagesCompare","MAWMpsGating","MAWMpsMessageIntegrityFetch","MpsTypes","WAResultOrError","WAStanzaUtils","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,c,e,f,g){var h=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","identifyXMAWithAssociatedTextByExternalId",{externalIds:g.map(function(a){return d("WAStanzaUtils").toStanzaId(a.offlineThreadingId)})}),m=g.map(k);a=await Promise.all([l(g),d("MAWMpsGating").isFullMpsEnabled()?[]:i(a,b,c,f,e),j(c,f,e),d("MAWMpsMessageIntegrityFetch").mpsMessageIntegrityFetch(c,"before",f,e)]);b=a[0];c=a[1];f=a[2];a=a[3];var n=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","identifyCollapsedMessagesByExternalId",{externalIds:f.map(function(a){return d("WAStanzaUtils").toStanzaId(a.externalId)})});function o(a){return!h.includes(a.externalId)}function p(a){return!n.includes(a.externalId)}function q(a){return o(a)&&p(a)}var r=b.filter(q),s=c.filter(q),t=f.filter(q),u=a==null?null:a.filter(q);m=m.filter(q);q=g.length-m.length;g=e-q;if(t.length===0)return d("WAResultOrError").makeError("EB result not available");m=d("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc");q=[].concat(s).sort(m).slice(0,g);s=[].concat(t).sort(m).slice(0,g);t=r.sort(m).slice(0,g);r=u!=null?[].concat(u).sort(m).slice(0,g):null;u=e;e=[].concat(c).sort(m).slice(0,u);c=[].concat(f).sort(m).slice(0,u);f=[].concat(b).sort(m).slice(0,u);b=a!=null?[].concat(a).sort(m).slice(0,u):null;return d("WAResultOrError").makeResult({S518614_messagesBacktest:{backendMessages:e,ebMessages:c,mpsMessages:b,uiMessages:f},S518614_pageSizeBacktest:u,messages:{backendMessages:q,ebMessages:s,mpsMessages:r,uiMessages:t},pageSize:g})}async function i(a,b,c,e,f){e=m(e);var g=e.msgId;e=e.timestampMs;b=await b.requestMessages(a,c,(h||(h=d("I64"))).of_float(e),g,"before",f,{admin:!1,editMsgHistory:!1,media:!1,polls:!1,reactions:!1,receiverFetch:!1,xma:!1},"integrity");return b.msgs}async function j(a,b,c){var e=m(b),f=e.msgId;e=e.timestampMs;f=await (f==null?Promise.resolve(null):d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:f}));var g=(f=f==null?void 0:f.externalId)!=null?f:(f=b.lastItemFromPreviousPage)==null?void 0:f.offlineThreadingId;b=await d("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:a,count:c*2,direction:"before",includeReferenceTimestamp:!0,referenceExternalId:g,referenceTimestampMs:e});if(b.success===!1)return[];f=b.value.sort(d("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc"));a=f.findIndex(function(a){return a.externalId===g});return f.slice(a+1)}function k(a){return{externalId:a.offlineThreadingId,msgType:(h||(h=d("I64"))).to_string(a.displayedContentTypes),sortOrderMs:h.to_float(a.primarySortKey)}}function l(a){var b=function(a){var b=d("MAWDbMsg").toMsgId(a.messageId);return b==null?Promise.resolve(k(a)):d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:b}).then(function(b){return babelHelpers.extends({},a,{offlineThreadingId:(b=b==null?void 0:b.externalId)!=null?b:a.offlineThreadingId})}).then(k)};return Promise.all(a.map(b))}function m(a){if(a.type==="lastItemFromPreviousPage")return{messageId:d("MpsTypes").toMessageId(a.lastItemFromPreviousPage.offlineThreadingId),msgId:d("MAWDbMsg").toMsgId(a.lastItemFromPreviousPage.messageId),timestampMs:d("WATimeUtils").castToMillisTime((h||(h=d("I64"))).to_float(a.lastItemFromPreviousPage.primarySortKey))};a.type;return c("gkx")("15880")===!0?{messageId:null,msgId:null,timestampMs:a.timeOfSnapshotMs}:{messageId:null,msgId:null,timestampMs:d("WATimeUtils").millisTime()}}g.fetchMessagesDataForComparison=a;g.getRangeDetailsFromMessageIntegrityFromReference=m}),98);
__d("MAWMpsMessageIntegrityFetch",["MAWCurrentUser","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWMessageIntegrityFetchMessagesData","MAWMessagesDirection","MpsOverBridge","MpsTypes","WAPromiseDelays"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e,f){e=d("MAWMessageIntegrityFetchMessagesData").getRangeDetailsFromMessageIntegrityFromReference(e);var g=e.messageId;e=e.timestampMs;c("MAWEBSwitch").isEnabled()===!0&&await Promise.race([d("WAPromiseDelays").delayMs(1e4),await c("MAWEBLSInWorkerSwitch").waitForEBEnabled()]);b=await d("MpsOverBridge").mps().loadMessages({config:{shouldFetchSupplementals:!1,shouldIgnoreLocalOnly:!0,strategy:"full-fetch"},debug:{purpose:"integrity-check"},direction:d("MAWMessagesDirection").translateMawDirectionToMwpDirection(b),from:[d("MpsTypes").toTimestamp(e),g],numMessages:f*2,threadId:d("MpsTypes").toThreadId(a)});return b.success===!1?null:b.value.messages.map(function(a){return{externalId:a.toplevelProtobuf.messageId,isOutgoing:a.toplevelProtobuf.senderId!==d("MAWCurrentUser").getID(),msgType:"",sortOrderMs:a.toplevelProtobuf.timestampMs}})}g.mpsMessageIntegrityFetch=a}),98);
__d("MAWSecureDataSource",[],(function(a,b,c,d,e,f){"use strict";a=10;f.DEFAULT_NUM_MESSAGES=a}),66);
__d("MAWSecureLocalDBDataSource",["CurrentMessengerUser","I64","MAWBridgeSendAndReceive","MAWDataSourceLogger","MAWDbMsg","MAWMessagesDirection","MAWMessagesPaginationUtils","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureDataSource","MAWSecureLocalDBFetch","MLV2DataSourceLogger","ODS","ReQL","WAStanzaUtils","WATagsLogger","err","isEbEnabledWithIGDEligibilityCheck","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=c("requireDeferred")("MAWEBFetch").__setRef("MAWSecureLocalDBDataSource"),o=d("WATagsLogger").TAGS(["MAWSecureLocalDBDataSource"]);function p(a){return a.msgs.map(function(a){return{externalId:a.externalId,isOptimistic:a.ack<1,isOutgoing:a.isAuthorMe,msgType:a.type_,sortOrderMs:a.sortOrderMs}})}a=function(){function a(){}var b=a.prototype;b.$1=async function(a,b,e,g,j,k,p,q){if(j==="after")return;j;o.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Fetch more: ",""])),b);(l||(l=d("ODS"))).bumpEntityKey(3185,"deprecated_secure_fetch",""+(d("CurrentMessengerUser").getAppID()||"unknown"));d("MAWDataSourceLogger").logLoadMoreMsgsThreadWaiting(p,"before",b);j=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"MAWSecureLocalDBDataSource");j=j.chatJid;d("MAWDataSourceLogger").logLoadMoreMsgsThreadReadyFetchMsgs(p);d("MAWDataSourceLogger").logLoadMessagesFromLocalDBStart(p);var r=g.minMessageId,s=await d("MAWMessagesPaginationUtils").getExternalIdByMsgId(r);q=await c("MAWSecureLocalDBFetch")({actionType:q,chatJid:j,config:{admin:!0,editMsgHistory:!0,media:!0,polls:!0,reactions:!0,receiverFetch:!0,xma:!0},count:k,direction:"before",offsetMsg:{externalId:s,includeOriginalMsg:!1,messageId:r},timestampMs:e});if(q.success===!1){throw(s=q.payload)!=null?s:c("err")(q.error)}var t=q.value;d("MAWDataSourceLogger").logLoadMessagesFromLocalDBEnd(p);d("MAWDataSourceLogger").logInsertMessageResponseToLSDBStart(p);d("MAWMessagesPaginationUtils").populateExternalIdCache(t.msgs);var u=t.msgs.length>0?t.msgs[t.msgs.length-1].msgId:g.minMessageId;await a.runInTransaction(async function(b){var c;await d("MAWPutMessagesToDB").insertMessageResponseToDBInExistingTransaction(a,b,t,p);c=await (c=b.messages_ranges_v2__generated).get.apply(c,[g.threadKey,g.minTimestampMs,g.minMessageId]);if(c==null)return;var e=t.hasMoreBefore;t.hasMoreBefore===!1&&await d("isEbEnabledWithIGDEligibilityCheck").isEbEnabledWithIGDEligibilityCheck(a)&&(e=!0);await b.messages_ranges_v2__generated.upsert([c.threadKey,c.minTimestampMs,c.minMessageId],{hasMoreAfter:!1,hasMoreBefore:e,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:c.maxMessageId,maxTimestampMs:c.maxTimestampMs,minMessageId:u,minTimestampMs:(m||(m=d("I64"))).zero,threadKey:g.threadKey})},"readwrite","ui",void 0,f.id+":152");d("MAWDataSourceLogger").logInsertMessageResponseToLSDBEnd(p);d("MAWDataSourceLogger").logLoadMoreMsgsFetched(p,t.hasMoreBefore);if(t.hasMoreBefore){d("MAWDataSourceLogger").logLoadMoreMsgsSuccess(p);return}r=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{chatJid:j,mayBeAdminMsgId:d("MAWDbMsg").toMsgId(g.minMessageId)});d("WATagsLogger").TAGS(["labyrinth_web","useFetchSecureMessages"]).LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["useFetchSecureMessages: threadJid: "," minMsgSortOrderTsResponse ",""])),j,r.minMsgTimestampMs);d("MAWDataSourceLogger").logLoadMoreMsgsRangeQuery(p,r.minMsgTimestampMs);e=await n.load();s=await e({chatJid:j,count:k,db:a,direction:"before",timestampMs:(m||(m=d("I64"))).of_float(r.minMsgTimestampMs)});s.success&&s.value.hasMoreBefore===!1&&await a.runInTransaction(async function(c){var e=g.minTimestampMs,f=await d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.messages_ranges_v2__generated).getKeyRange(b).bounds({lte:[e]}).filter(function(a){var b=a.maxTimestampMs;a=a.minTimestampMs;return(m||(m=d("I64"))).ge(e,a)&&(m||(m=d("I64"))).le(e,b)}));if(f==null)return;await c.messages_ranges_v2__generated.upsert([f.threadKey,f.minTimestampMs,f.minMessageId],babelHelpers.extends({},f,{hasMoreBefore:!1,isLoadingBefore:!1}))},"readwrite","ui",void 0,f.id+":236");d("MAWDataSourceLogger").logLoadMoreMsgsSuccess(p)};b.requestMessages=async function(a,b,e,f,g,h,i,j){a=await d("MAWMessagesPaginationUtils").getExternalIdByMsgId(f);j=await c("MAWSecureLocalDBFetch")({actionType:j,chatJid:b,config:i,count:h!=null?h:d("MAWSecureDataSource").DEFAULT_NUM_MESSAGES,direction:g,offsetMsg:f==null?null:{externalId:a,includeOriginalMsg:!1,messageId:f},timestampMs:e});if(j.success===!1){throw(b=j.payload)!=null?b:c("err")(j.error)}i=j.value;d("MAWMessagesPaginationUtils").populateExternalIdCache(i.msgs);h=i.msgs.map(function(a){return{externalId:a.externalId,isOptimistic:a.ack<1,isOutgoing:a.isAuthorMe,msgType:a.type_,sortOrderMs:a.sortOrderMs}});return{hasMoreAfter:i.hasMoreAfter,hasMoreBefore:i.hasMoreBefore,msgs:h}};b.fetchSecureMessagesProtocol=function(a,b,c,e,f,g,h,i){h===void 0&&(h=d("MAWSecureDataSource").DEFAULT_NUM_MESSAGES);c=d("MAWDataSourceLogger").logLoadMoreMsgsStart(c);return this.$1(a,b,e,f,g,h,c,i).catch(function(a){var c;o.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch messages: ",""])),a);(c=d("MLV2DataSourceLogger").getMLV2LoggerForThread(b,d("MAWMessagesDirection").translateMawDirectionToMwpDirection(g)))==null||c.markQPLFailure(a)})};b.fetchMessagesByExternalId=function(a,b){a.length>2&&o.WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Fetching "," messages by external id, which is not optimal.\n      Consider migrating 'loadMsgsByExternalId' backend request to a batch version "])),a.length);a=a.map(function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMsgsByExternalId",{config:b,externalId:d("WAStanzaUtils").toStanzaId(a)})});return Promise.all(a).then(function(a){return a.map(function(a){return p(a)}).flat()})};return a}();g.default=a}),98);
__d("MAWMessageIntegrityFetchAndCompareData",["MAWMessageIntegrityCompareMessagesData","MAWMessageIntegrityFetchMessagesData","MAWMiActOnActThreadReady","MAWSecureLocalDBDataSource","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("MAWSecureLocalDBDataSource"))();async function a(a){var b=a.db,c=a.fromReferencePoint,e=a.hasEbFetchFailed,f=a.localMessages,g=a.pageSize;a=a.threadKey;var i=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(b.tables,a,"fetchAndCompareMessagesData");i=i.chatJid;g=await d("MAWMessageIntegrityFetchMessagesData").fetchMessagesDataForComparison(b,h,i,g,c,f);if(g.success===!1)return g;c=await d("MAWMessageIntegrityCompareMessagesData").compareMessagesData(b,h,i,a,g.value,e);return d("WAResultOrError").makeResult(c)}g.fetchAndCompareMessagesData=a}),98);
__d("MAWMessagesIntegrityEphemeralSettings",["I64","MAWGetEphemeralSettings","MAWMiActOnActThreadReady","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,c){a=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"getIsEphemeralMessagesEnabledForPage");a=a.chatJid;a=await d("MAWGetEphemeralSettings").getEphemeralSetting(a,b);if(a==null||a.ephemeralLastUpdatedOrSetTimestamp===d("WATimeUtils").DEFAULT_UNIXTIME)return"disabled";return d("WATimeUtils").castUnixTimeToMillisTime(a.ephemeralLastUpdatedOrSetTimestamp)<(h||(h=d("I64"))).to_float(c)?a.ephemeralExpirationInSec>0?"enabled":"disabled":a.ephemeralExpirationInSec>0?"maybeDisabled":"maybeEnabled"}g.getEphemeralMessagesStatusForPage=a}),98);
__d("MAWMessageIntegrityCheck",["CometDebounce","DateConsts","EbFetchTimeoutMsForMLv2","I64","MAWBridgeSendAndReceive","MAWEBCombinedSwitch","MAWMessageIntegrityCheckFlytrapResultCache","MAWMessageIntegrityEBFetchStatus","MAWMessageIntegrityFetchAndCompareData","MAWMessageIntegrityTruncateStatus","MAWMessagesIntegrityEphemeralSettings","MAWMiActOnActThreadReady","WACommsConnectionState","WAPromiseDelays","WATagsLogger","WATimeUtils","gkx","justknobx","logMessengerWebFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v="11",w=1e3*60*2,x=d("WATagsLogger").TAGS(["MissingMessages"]),y=c("CometDebounce")(c("logMessengerWebFalcoEvent"));function z(a){if(a.length===0)return null;var b=0;for(a of a)b=Math.max(b,(u||(u=d("I64"))).to_float(a.primarySortKey));return d("WATimeUtils").castToMillisTime(b)}function A(a,b){a=z(a);if(a==null)return b;var d=Math.abs(a-b),e=c("justknobx")._("4843");return d<e?a:b}async function a(a,b,e,f,g,z,D,H,I,J){x.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["run Message Integrity Check - threadKey: ",", lastItem: ",", pageSize: ",""])),(u||(u=d("I64"))).to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),g);if(d("WATimeUtils").millisTime()-I>w){x.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check skipped for threadKey: ",", lastItem: ",", reason: check was scheduled more than 2 minutes ago"])),(u||(u=d("I64"))).to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey));return}var K=d("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled();if(z==null&&d("WACommsConnectionState").WACommsConnectionState.isConnected()===!1&&c("gkx")("15879")===!0){x.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check skipped for threadKey: ",", lastItem: ",", reason: WACOMMS is disconnected"])),(u||(u=d("I64"))).to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey));return}var L=z==null&&c("gkx")("15880")===!0;if(L){var M=c("justknobx")._("4844"),N=I+M;N=Math.min(N-d("WATimeUtils").millisTime(),M);x.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check - threadKey "," - Latest Page - waiting ","ms"])),(u||(u=d("I64"))).to_string(b),N);await d("WAPromiseDelays").delayMs(N)}M=d("WATimeUtils").millisTime();N=c("gkx")("1626");var O=d("MAWMessageIntegrityEBFetchStatus").hasEBFailure(b),P=d("MAWMessageIntegrityTruncateStatus").getThreadThuncateState(b),Q=z!=null?{lastItemFromPreviousPage:z,type:"lastItemFromPreviousPage"}:{timeOfSnapshotMs:A(D,I),type:"latestPageSnapshot"};Q=await d("MAWMessageIntegrityFetchAndCompareData").fetchAndCompareMessagesData({db:a,fromReferencePoint:Q,hasEbFetchFailed:O,localMessages:D,pageSize:g,threadKey:b});if(Q.success===!1){x.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check skipped for threadKey: ",", lastItem: ",", reason: ",""])),(u||(u=d("I64"))).to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),Q.error);return}g=Q.value;c("gkx")("4852")&&g.uiVsEB.detailedResults.some(function(a){a[0];a=a[1];return a==="missing_in_target"})&&J();Q=d("MAWMessageIntegrityCheckFlytrapResultCache").generateMessageIntegrityCheckPageKey(b,D);d("MAWMessageIntegrityCheckFlytrapResultCache").cacheMessageIntegrityCheckResult(Q,g.missingInTargetCategory);x.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check result - threadKey: ",", lastItem: ",", result against backend data: ",""])),u.to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),JSON.stringify(g.uiVsMaw));x.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check result - threadKey: ",", lastItem: ",", result against EB data: ",""])),u.to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),JSON.stringify(g.uiVsEB));x.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check result - threadKey: ",", lastItem: ",", MPS (target) vs MAW (reference): ",""])),u.to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),JSON.stringify(g.mpsVsMaw));x.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check result - threadKey: ",", lastItem: ",", MPS (target) vs EB (reference): ",""])),u.to_string(b),z==null?"null":(u||(u=d("I64"))).to_float(z.primarySortKey),JSON.stringify(g.mpsVsEB));x.LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check Flytrap result - threadKey: ",", missingInTargetCategory: ",""])),u.to_string(b),JSON.stringify(g.missingInTargetCategory));x.LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check Truncate state - threadKey: ",", state: ",""])),u.to_string(b),JSON.stringify(P));J=C(g.mawVsEB);Q=C(g.uiVsEB);var R=C(g.uiVsMaw),S=g.mpsVsMaw!=null?C(g.mpsVsMaw):{},T=g.mpsVsEB!=null?C(g.mpsVsEB):{},U=C(g.S518614_mawVsEB),V=C(g.S518614_uiVsEB),W=C(g.S518614_uiVsMaw),X=g.S518614_mpsVsMaw!=null?C(g.S518614_mpsVsMaw):{},Y=g.S518614_mpsVsEB!=null?C(g.S518614_mpsVsEB):{};D=E(D);var Z=await d("MAWMessagesIntegrityEphemeralSettings").getEphemeralMessagesStatusForPage(a,b,D);a=await F(a,b);var $=await d("WAPromiseDelays").withTimeout(G({messages:[]}).catch(function(a){x.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to get extra debug info: ",""])),a);return"error"}),1e4,function(){return"timeout"});T={MAW_vs_EB_detailedResults:J.detailedResults,MAW_vs_EB_numOfMissingInReference:J.numOfMissingInReference,MAW_vs_EB_numOfMissingInTarget:J.numOfMissingInTarget,MAW_vs_EB_numOfMissingInTargetInvalidSortOrder:J.numOfMissingInTargetInvalidSortOrder,MAW_vs_EB_setNumOfMissingInReference:J.setDifferenceInReference,MAW_vs_EB_setNumOfMissingInTarget:J.setDifferenceInTarget,MPS_vs_EB_detailedResults:(J=T.detailedResults)!=null?J:"",MPS_vs_EB_numOfMissingInReference:(J=T.numOfMissingInReference)!=null?J:"",MPS_vs_EB_numOfMissingInTarget:(J=T.numOfMissingInTarget)!=null?J:"",MPS_vs_MAW_detailedResults:(T=S.detailedResults)!=null?T:"",MPS_vs_MAW_numOfMissingInReference:(J=S.numOfMissingInReference)!=null?J:"",MPS_vs_MAW_numOfMissingInTarget:(T=S.numOfMissingInTarget)!=null?T:"",S518614_MAW_vs_EB_detailedResults:(J=U.detailedResults)!=null?J:"",S518614_MPS_vs_EB_detailedResults:(S=Y.detailedResults)!=null?S:"",S518614_MPS_vs_MAW_detailedResults:(T=X.detailedResults)!=null?T:"",S518614_pageSize:g.S518614_pageSize.toString(),S518614_UI_vs_EB_detailedResults:(U=V.detailedResults)!=null?U:"",S518614_UI_vs_MAW_detailedResults:(J=W.detailedResults)!=null?J:"",S518614_wouldHaveThrown:B(g.S518614_wouldHaveThrown),UI_vs_EB_detailedResults:Q.detailedResults,UI_vs_EB_numOfMissingInReference:Q.numOfMissingInReference,UI_vs_EB_numOfMissingInTarget:Q.numOfMissingInTarget,UI_vs_EB_setNumOfMissingInReference:Q.setDifferenceInReference,UI_vs_EB_setNumOfMissingInTarget:Q.setDifferenceInTarget,UI_vs_MAW_detailedResults:R.detailedResults,UI_vs_MAW_numOfMissingInReference:R.numOfMissingInReference,UI_vs_MAW_numOfMissingInTarget:R.numOfMissingInTarget,UI_vs_MAW_setNumOfMissingInReference:R.setDifferenceInReference,UI_vs_MAW_setNumOfMissingInTarget:R.setDifferenceInTarget,ebMetadataCacheStatus:a,ebTimeoutSec:(c("EbFetchTimeoutMsForMLv2")()/d("DateConsts").MS_PER_SEC).toString(),endRangeTimestampMs:u.to_string(D),ephemeralMessagesStatus:Z+"",extraDebugInfo:$,hasAdditionalData:B(N),hasEBFetchFailed:B(O),integrityCheckScheduleTimestampMs:I.toString(),isDogfooding:B(c("gkx")("2972")),isEbEnabled:B(K),isEbGraphQL:K?"false":B(c("gkx")("7083")),isHoldout_H2_2025:B(c("gkx")("15728")),isJidOptimisationInRestoreEnabled:B(c("gkx")("3137")),isMpsEnabled:"true",isUsePageTimeForLatestPage:B(L),isUsingLsInitCache:B(c("gkx")("15958")),lastItemExternalId:(Y=z==null?void 0:z.offlineThreadingId)!=null?Y:"null",lastItemTimestamp:u.to_string((S=z==null?void 0:z.primarySortKey)!=null?S:(u||(u=d("I64"))).zero),missingInTargetCategory:JSON.stringify(g.missingInTargetCategory),pageIndex:H+"",pageSize:g.pageSize+"",reportTimeMs:M.toString(),truncateState:(X=JSON.stringify(P))!=null?X:"null",version:K?v:"0",waCommsIsConnected:B(d("WACommsConnectionState").WACommsConnectionState.isConnected())};c("gkx")("970")&&x.DEV(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Message Integrity Check - Falco Report"]))).devConsole({falcoReport:T});y({threadKey:b,threadType:e},"message_integrity_check",f,T)}function B(a){return a===!0?"true":"false"}function C(a){var b=0,c=0,d=0;a.detailedResults.forEach(function(a){a[0];a=a[1];switch(a.result){case"missing_in_target":case"missing_in_target_exists_in_lsdb":b+=1;break;case"missing_in_target_invalid_sortOrder":c+=1;b+=1;break;case"missing_in_reference":d+=1;break;case"consistent":case"skipped_in_target":case"skipped_in_reference":break;default:a.result}});return{detailedResults:D(a.detailedResults),numOfMissingInReference:d+"",numOfMissingInTarget:b+"",numOfMissingInTargetInvalidSortOrder:c+"",setDifferenceInReference:a.setDifferenceInReference+"",setDifferenceInTarget:a.setDifferenceInTarget+""}}function D(a){a=a.map(function(a){var b=a[0];a=a[1];var d=a.existingInUISamePage,e=a.result,f=a.sortOrderSkewMs;a=a.sortOrderSkewNumberOfMsg;return babelHelpers.extends({existingInUISamePage:d,externalId:b.externalId,isOutgoing:b.isOutgoing},c("gkx")("1626")?{msgType:b.msgType,sortOrderMs:b.sortOrderMs}:{},{result:e,sortOrderSkewMs:f!=null?f:0,sortOrderSkewNumberOfMsg:a!=null?a:0})});return JSON.stringify(a)}function E(a){return a.length===0?(u||(u=d("I64"))).min_int:a.map(function(a){return a.timestampMs}).sort((u||(u=d("I64"))).compare)[0]}async function F(a,b){a=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"fetchAndCompareMessagesData");b=a.chatJid;a=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getEBMetadataCacheDetailsForThread",{chatJid:b});return JSON.stringify(a)}async function G(a){a={browser:{loadEventEnd:window.performance.timing.loadEventEnd,navigationStart:window.performance.timing.navigationStart},worker:await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWorkerBasedMessageIntegrityDebugInfo",a)};return JSON.stringify(a)}b={runMessageIntegrityCheck:a};g.default=b}),98);
__d("MWCMCreateSubthreadMenuItem.react",["I64","Int64Hooks","LsFalcoEventEntryPoint","MWXMenuItem.react","SubthreadCreationStrings.react","react","react-compiler-runtime","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadMenuItem.react");function a(a){var b=d("react-compiler-runtime").c(12),e=a.message;a=c("useMWCMCreateSubthread")(e);var f=a[0];a=a[1];var g=c("useOpenSubthreadView")(),h=e.subthreadKey,l,m;b[0]!==e.messageId||b[1]!==e.threadKey||b[2]!==f||b[3]!==g||b[4]!==h?(l=function(){k.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadMenuItem",type:h!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:e.messageId,recipient_id:void 0},thread:{group_size:(i||(i=d("I64"))).to_string(i.zero),id:i.to_string(e.threadKey),type:18}}})}),h!=null?g(h):f()},m=[e.messageId,e.threadKey,f,g,h],b[0]=e.messageId,b[1]=e.threadKey,b[2]=f,b[3]=g,b[4]=h,b[5]=l,b[6]=m):(l=b[5],m=b[6]);l=d("Int64Hooks").useCallbackInt64(l,m);m=h!=null?d("SubthreadCreationStrings.react").viewSubthreadLabel:d("SubthreadCreationStrings.react").createSubthreadLabel;var n=h!=null?d("SubthreadCreationStrings.react").viewSubthreadLabel:d("SubthreadCreationStrings.react").createSubthreadLabel,o;b[7]!==a||b[8]!==l||b[9]!==m||b[10]!==n?(o=j.jsx(c("MWXMenuItem.react"),{"aria-label":m,disabled:a,onClick:l,primaryText:n}),b[7]=a,b[8]=l,b[9]=m,b[10]=n,b[11]=o):o=b[11];return o}g["default"]=a}),98);
__d("MWChatAudioLog",["AudioClipsBrowserBlockMicAccessFalcoEvent","AudioClipsCancelledByUserFalcoEvent","AudioClipsDialogNotnowMicAccessFalcoEvent","AudioClipsDialogOkMicAccessFalcoEvent","AudioClipsMicAccessCheckFailedFalcoEvent","AudioClipsPlaybackPauseFalcoEvent","AudioClipsPlaybackResumeFalcoEvent","AudioClipsPlaybackStartFalcoEvent","AudioClipsStartRecordingClickFalcoEvent","AudioClipsStopRecordingClickFalcoEvent","I64","Ls1lcFeatureOpenFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){c("AudioClipsStopRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:"true",position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function b(){c("AudioClipsStartRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}}),c("Ls1lcFeatureOpenFalcoEvent").log(function(){return{extra:void 0,feature:13,feature_sessionid:void 0,screen_orientation:void 0,stage:7,thread:void 0}})}function e(){c("AudioClipsCancelledByUserFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function f(){c("AudioClipsBrowserBlockMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function i(a){c("AudioClipsPlaybackStartFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function j(a,b){c("AudioClipsPlaybackPauseFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function k(a,b){c("AudioClipsPlaybackResumeFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function l(){c("AudioClipsDialogOkMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function m(){c("AudioClipsDialogNotnowMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function n(){c("AudioClipsMicAccessCheckFailedFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}g.logClickStopRecording=a;g.logClickStartRecording=b;g.logDeleteRecording=e;g.logBrowserDenyAccess=f;g.logPlaybackStart=i;g.logPlaybackPause=j;g.logPlaybackResume=k;g.logDialogOk=l;g.logDialogNotNow=m;g.logMicAccessCheckFailed=n}),98);
__d("useMWChatPromptSuggestions",["fbt","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useMemo;var j=[h._(/*BTDS*/"Sk\u0105d wiesz o tym kanale?"),h._(/*BTDS*/"Do jakiego celu ma s\u0142u\u017cy\u0107 ten kana\u0142?"),h._(/*BTDS*/"Jakiego utworu s\u0142uchasz?"),h._(/*BTDS*/"To mnie \u015bmieszy \ud83d\udc80"),h._(/*BTDS*/"To, co teraz lubisz najbardziej \ud83d\udc98"),h._(/*BTDS*/"Ulubiony cel podr\u00f3\u017cy \u2708\ufe0f"),h._(/*BTDS*/"Twoje szcz\u0119\u015bliwe miejsce \u2763\ufe0f"),h._(/*BTDS*/"Tw\u00f3j pow\u00f3d do dumy \ud83d\udc9f"),h._(/*BTDS*/"Dziesi\u0119\u0107 lat temu\u2026"),h._(/*BTDS*/"Co jest na Twojej dzisiejszej li\u015bcie wdzi\u0119czno\u015bci? \ud83e\udef6"),h._(/*BTDS*/"Jaka jest Twoja praca marze\u0144 (je\u015bli pieni\u0105dze si\u0119 nie licz\u0105)?"),h._(/*BTDS*/"Co Ci\u0119 teraz inspiruje? \ud83c\udf1f"),h._(/*BTDS*/"Jaka jest Twoja unikatowa cecha?"),h._(/*BTDS*/"Film, kt\u00f3ry ostatnio Ci si\u0119 spodoba\u0142 \ud83c\udfa5"),h._(/*BTDS*/"Szlachetne zdrowie \ud83d\udcaa\ud83e\udd57"),h._(/*BTDS*/"Tw\u00f3j ostatni koncert \ud83d\udc69\u200d\ud83c\udfa4"),h._(/*BTDS*/"Moja dzisiejsza lekcja\u2026"),h._(/*BTDS*/"Co b\u0119dziesz robi\u0107 dzi\u015b wieczorem?")];function k(a){a=a.slice();for(var b=a.length-1;b>=0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}return a}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k(j),a[0]=b):b=a[0];a=b;return a}g["default"]=a}),226);
__d("MWChatPromptFlyoutSuggestions.react",["FocusGroup.react","MWXPressable.react","MWXScrollableArea.react","MWXText.react","focusScopeQueries","react","react-compiler-runtime","useMWChatPromptSuggestions"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={pressable:{borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",marginTop:"xw7yly9",marginBottom:"x1yztbdb",marginInlineStart:"x13fj5qh",marginInlineEnd:"x1xegmmw",marginLeft:null,marginRight:null,$$css:!0},scrollArea:{maxWidth:"x193iq5w",$$css:!0}};function k(a){var b=d("react-compiler-runtime").c(6),e=a.onPress;a=a.text;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x6s0dn4 xx7qk4p x6nl9eh x1a5l9x9 x7vuprf x1mg3h75 xwflfxt x78zum5 x2lah0s x1vqgdyp xl56j7k x1kbpmyu x1y1aw1k xf159sx xwib8y2 xmzvs34 x2b8uid"},b[0]=f):f=b[0];b[1]!==a?(f=i.jsx("div",babelHelpers["extends"]({},f,{children:i.jsx(c("MWXText.react"),{color:"secondary",numberOfLines:2,type:"body4",children:a})})),b[1]=a,b[2]=f):f=b[2];b[3]!==e||b[4]!==f?(a=i.jsx(c("MWXPressable.react"),{onPress:e,overlayRadius:"inherit",xstyle:j.pressable,children:f}),b[3]=e,b[4]=f,b[5]=a):a=b[5];return a}b=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);var l=b[0],m=b[1];function a(a){var b=d("react-compiler-runtime").c(11),e=a.onPressSuggestion;a=c("useMWChatPromptSuggestions")();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx("div",{className:"x2lah0s x1xc55vz"}),b[0]=f):f=b[0];if(b[1]!==e||b[2]!==a){var g;b[4]!==e?(g=function(a,b){return i.jsx(m,{children:i.jsx(k,{onPress:function(){return e(a,b)},text:a})},b)},b[4]=e,b[5]=g):g=b[5];g=a.map(g);b[1]=e;b[2]=a;b[3]=g}else g=b[3];b[6]!==g?(a=i.jsx(l,{orientation:"horizontal",tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrap:!0,children:g}),b[6]=g,b[7]=a):a=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx("div",{className:"x2lah0s x1xc55vz"}),b[8]=g):g=b[8];b[9]!==a?(f=i.jsxs(c("MWXScrollableArea.react"),{horizontal:!0,vertical:!1,xstyle:j.scrollArea,children:[f,a,g]}),b[9]=a,b[10]=f):f=b[10];return f}g["default"]=a}),98);
__d("MWXDialogFooter.react",["MWXSpinner.react","cr:6993","cr:9720","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["callToActionGroupDirection","callToActionGroupWrap","primaryCallToAction","secondaryCallToAction"],i=["disabled","loading"],j,k=j||d("react");function a(a){var e=d("react-compiler-runtime").c(29),f,g,j,l,m;e[0]!==a?(g=a.callToActionGroupDirection,j=a.callToActionGroupWrap,l=a.primaryCallToAction,m=a.secondaryCallToAction,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=j,e[4]=l,e[5]=m):(f=e[1],g=e[2],j=e[3],l=e[4],m=e[5]);if(b("cr:9720")!=null){a=l!=null?l:m;var n=l==null?null:m;if(a==null)return null;var o,p,q;e[6]!==a?(o=a.disabled,p=a.loading,q=babelHelpers.objectWithoutPropertiesLoose(a,i),e[6]=a,e[7]=o,e[8]=p,e[9]=q):(o=e[7],p=e[8],q=e[9]);var r;e[10]!==p?(r=p===!0?k.jsx(c("MWXSpinner.react"),{color:"blue",size:24}):void 0,e[10]=p,e[11]=r):r=e[11];r=r;p=p===!0?!0:o;o=a.type==="destructive"?"fdsOverride_negative":a.type;e[12]!==r||e[13]!==q||e[14]!==p||e[15]!==o?(a=babelHelpers["extends"]({},q,{addOnPrimary:r,disabled:p,type:o}),e[12]=r,e[13]=q,e[14]=p,e[15]=o,e[16]=a):a=e[16];e[17]!==f||e[18]!==g||e[19]!==j||e[20]!==n||e[21]!==a?(r=k.jsx(b("cr:9720"),babelHelpers["extends"]({direction:g,primary:a,secondary:n,wrap:j},f)),e[17]=f,e[18]=g,e[19]=j,e[20]=n,e[21]=a,e[22]=r):r=e[22];return r}if(b("cr:6993")!=null){e[23]!==f||e[24]!==g||e[25]!==j||e[26]!==l||e[27]!==m?(q=k.jsx(b("cr:6993"),babelHelpers["extends"]({callToActionGroupDirection:g,callToActionGroupWrap:j,primaryCallToAction:l,secondaryCallToAction:m},f)),e[23]=f,e[24]=g,e[25]=j,e[26]=l,e[27]=m,e[28]=q):q=e[28];return q}return null}g["default"]=a}),98);
__d("MWChatPromptDialog.react",["fbt","FBLogger","FocusRegion.react","I64","MWChatPromptFlyoutFrontCard.react","MWChatPromptFlyoutSuggestions.react","MWPromptCreationUtils","MWXDialog.react","MWXDialogFooter.react","MWXDialogHeader.react","MWXText.react","MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent","RollCallPromptType","react","react-compiler-runtime","useMWXPushToast","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;b=l||d("react");var m=i||(i=c("react"));b.useCallback;var n=b.useState;function a(a){var b=d("react-compiler-runtime").c(47),e=a.onClose,f=a.threadKey,g=(k||(k=c("useReStore")))(),i=c("useMWXPushToast")();a=n("");var l=a[0],p=a[1];a=n(!1);var q=a[0],r=a[1];b[0]!==e||b[1]!==f?(a=function(){e(),c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:303,source:156,surface:7,thread_id:(j||(j=d("I64"))).to_string(f)}})},b[0]=e,b[1]=f,b[2]=a):a=b[2];var s=a;b[3]!==g||b[4]!==s||b[5]!==l||b[6]!==i||b[7]!==f?(a=function(){(async function(){r(!0),await d("MWPromptCreationUtils").createAuthoritiativeRollCall(g,f,l,c("RollCallPromptType").TEXT),s()})().catch(function(a){r(!1),c("FBLogger")("messenger_web").catching(a).mustfix("Creating prompt"),i({body:h._(/*BTDS*/"Nie uda\u0142o si\u0119 utworzy\u0107 zach\u0119ty")})}),c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:304,source:17,surface:101,thread_id:(j||(j=d("I64"))).to_string(f)}})},b[3]=g,b[4]=s,b[5]=l,b[6]=i,b[7]=f,b[8]=a):a=b[8];a=a;var t;b[9]!==f?(t=function(a,b){p(a.toString()),c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:366,extra:{suggestion_position:b.toString(),suggestion_text:a.toString()},source:173,surface:101,thread_id:(j||(j=d("I64"))).to_string(f)}})},b[9]=f,b[10]=t):t=b[10];t=t;var u=o,v;b[11]!==f?(v={onImpressionStart:function(){c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:2,event_name:301,source:156,surface:7,thread_id:(j||(j=d("I64"))).to_string(f)}})}},b[11]=f,b[12]=v):v=b[12];v=c("useSinglePartialViewImpression")(v);var w;b[13]!==q||b[14]!==l?(w=q||l.trim()==="",b[13]=q,b[14]=l,b[15]=w):w=b[15];b[16]===Symbol.for("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Wy\u015blij"),b[16]=q):q=b[16];b[17]!==a||b[18]!==w?(q={disabled:w,label:q,onPress:a},b[17]=a,b[18]=w,b[19]=q):q=b[19];b[20]===Symbol.for("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Anuluj"),b[20]=a):a=b[20];b[21]!==s?(w={label:a,onPress:s},b[21]=s,b[22]=w):w=b[22];b[23]!==q||b[24]!==w?(a=m.jsx(c("MWXDialogFooter.react"),{callToActionGroupDirection:"backward",primaryCallToAction:q,secondaryCallToAction:w}),b[23]=q,b[24]=w,b[25]=a):a=b[25];b[26]===Symbol.for("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Nowa zach\u0119ta"),b[26]=q):q=b[26];b[27]!==s?(w=m.jsx(c("MWXDialogHeader.react"),{onClose:s,title:q,withCloseButton:!0}),b[27]=s,b[28]=w):w=b[28];b[29]===Symbol.for("react.memo_cache_sentinel")?(q={className:"x6s0dn4 x9f619 x78zum5 xdt5ytf"},b[29]=q):q=b[29];var x;b[30]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x1y1aw1k x1n2onr6"},b[30]=x):x=b[30];var y;b[31]===Symbol.for("react.memo_cache_sentinel")?(y=function(a){p(a.target.value)},b[31]=y):y=b[31];b[32]!==l?(x=m.jsx("div",babelHelpers.extends({},x,{children:m.jsx(c("MWChatPromptFlyoutFrontCard.react"),{maxLength:75,onChange:y,showFacepile:!1,value:l})})),b[32]=l,b[33]=x):x=b[33];b[34]!==t?(y=m.jsx(c("MWChatPromptFlyoutSuggestions.react"),{onPressSuggestion:t}),b[34]=t,b[35]=y):y=b[35];b[36]===Symbol.for("react.memo_cache_sentinel")?(t={className:"xyamay9 x2b8uid"},b[36]=t):t=b[36];b[37]===Symbol.for("react.memo_cache_sentinel")?(t=m.jsx("div",babelHelpers.extends({},t,{children:m.jsx(c("MWXText.react"),{type:"meta4",children:h._(/*BTDS*/"Uczestnicy mog\u0105 odpowiada\u0107 przy u\u017cyciu tekstu przez 24 godziny.")})})),b[37]=t):t=b[37];b[38]!==v||b[39]!==x||b[40]!==y?(u=m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:u,children:m.jsxs("div",babelHelpers.extends({},q,{ref:v,children:[x,y,t]}))}),b[38]=v,b[39]=x,b[40]=y,b[41]=u):u=b[41];b[42]!==s||b[43]!==a||b[44]!==w||b[45]!==u?(q=m.jsx(c("MWXDialog.react"),{footer:a,header:w,onClose:s,size:"small",children:u}),b[42]=s,b[43]=a,b[44]=w,b[45]=u,b[46]=q):q=b[46];return q}function o(a){return a==="textarea"}g.default=a}),226);
__d("NewPollSubmitErrorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5500");b=d("FalcoLoggerInternal").create("new_poll_submit_error",a);e=b;g["default"]=e}),98);
__d("NewPollSubmitSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5501");b=d("FalcoLoggerInternal").create("new_poll_submit_success",a);e=b;g["default"]=e}),98);
__d("OpenExistingPollFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5502");b=d("FalcoLoggerInternal").create("open_existing_poll",a);e=b;g["default"]=e}),98);
__d("ShowVotersFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5503");b=d("FalcoLoggerInternal").create("show_voters",a);e=b;g["default"]=e}),98);
__d("StartNewPollFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5504");b=d("FalcoLoggerInternal").create("start_new_poll",a);e=b;g["default"]=e}),98);
__d("SubmitExistingPollFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5505");b=d("FalcoLoggerInternal").create("submit_existing_poll",a);e=b;g["default"]=e}),98);
__d("SubmitNewPollFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5506");b=d("FalcoLoggerInternal").create("submit_new_poll",a);e=b;g["default"]=e}),98);
__d("MWGroupPollLogger",["ChangeVoteFalcoEvent","ExistingPollSubmitErrorFalcoEvent","ExistingPollSubmitSuccessFalcoEvent","NewPollSubmitErrorFalcoEvent","NewPollSubmitSuccessFalcoEvent","OpenExistingPollFalcoEvent","ShowVotersFalcoEvent","StartNewPollFalcoEvent","SubmitExistingPollFalcoEvent","SubmitNewPollFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case"start_new_poll":c("StartNewPollFalcoEvent").log(function(){return b});break;case"submit_new_poll":c("SubmitNewPollFalcoEvent").log(function(){return b});break;case"open_existing_poll":c("OpenExistingPollFalcoEvent").log(function(){return b});break;case"submit_existing_poll":c("SubmitExistingPollFalcoEvent").log(function(){return b});break;case"change_vote":c("ChangeVoteFalcoEvent").log(function(){return b});break;case"show_voters":c("ShowVotersFalcoEvent").log(function(){return b});break;case"existing_poll_submit_error":c("ExistingPollSubmitErrorFalcoEvent").log(function(){return b});break;case"existing_poll_submit_success":c("ExistingPollSubmitSuccessFalcoEvent").log(function(){return b});break;case"new_poll_submit_error":c("NewPollSubmitErrorFalcoEvent").log(function(){return b});break;case"new_poll_submit_success":c("NewPollSubmitSuccessFalcoEvent").log(function(){return b});break}}g.log=a}),98);
__d("MlsMessageActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1401");b=d("FalcoLoggerInternal").create("mls_message_action",a);e=b;g["default"]=e}),98);
__d("MWLogMessageAction",["I64","MWLSContactTypeExactUtils","MlsMessageActionFalcoEvent","ReQL","coerceMessagingThreadTypeToLSThreadType"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,e,f,g,i,j,k,l,m,n){var o,p=await (o=d("ReQL")).firstAsync(o.fromTableAscending(a.tables.threads).getKeyRange(e)),q=await o.toArrayAsync(o.fromTableAscending(a.tables.participants).getKeyRange(e)),r=await o.firstAsync(o.mergeJoin(o.fromTableAscending(a.tables.participants).getKeyRange(e),o.fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1].contactTypeExact;return d("MWLSContactTypeExactUtils").isIgContact(a)}))!=null;p!=null&&c("MlsMessageActionFalcoEvent").log(function(){return{action:g,browser_window_height:window.innerHeight,browser_window_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,error_text:j,extra:i,group_size:String(q.length),is_xac_thread:r,ls_thread_type:c("coerceMessagingThreadTypeToLSThreadType")(p.threadType),message_type:m!=null?m:"text",mid:b,reaction:k,recipient_id:l!=null?(h||(h=d("I64"))).to_string(l):void 0,sender_id:(h||(h=d("I64"))).to_string(n),source:f,thread_id:h.to_string(e)}})}b={log:a};g.default=b}),98);
__d("MWPinnedMessagesDialogNUXFactoryRequireNUX.react",["nux:345"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a;return(a=b("nux:345"))==null?void 0:a("WEB_MSGR_PINNED_MESSAGES_NUX")};c=a;g["default"]=c}),98);
__d("useMAWToggleSecurePinMessage",["I64","LSFactory","LSOptimisticSetOrUnsetPinnedMessageStoredProcedure","LSPinnedMessageState","MWPBumpEntityKey","MessengerWebUXLogger","ReQL","ServerTime","react","useAsyncReStore","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(a,b){var e=c("useAsyncReStore")(),g=c("useMWPIsMessagePinned")(a),h=a.offlineThreadingId,k=a.threadKey,l=d("ServerTime").getMillis(),m=c("MessengerWebUXLogger").useInteractionLogger();a=async function(){var a=await e,j=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(k));await a.runInTransaction(function(a){var e=g?c("LSPinnedMessageState").NOT_PINNED:c("LSPinnedMessageState").PINNED,f=g?"unpin_message":"pin_message",n=g?"unpin":"pin";b==="message_dot_menu"?m==null||m({eventName:f,threadKey:k,threadType:j==null?void 0:j.threadType}):n==="unpin"&&b==="pinned_message_list_dot_menu"&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","unpin");return c("LSOptimisticSetOrUnsetPinnedMessageStoredProcedure")(c("LSFactory")(a),{offlineThreadingId:h,state:(i||(i=d("I64"))).of_int32(e),threadKey:k,timestampMs:i.of_int32(l)})},"readwrite",void 0,void 0,f.id+":51")};return j(a,[e,g,k,l,h,b,m])}g.default=a}),98);
__d("useMWPinnedMessageLimitReached",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=50;function a(a){var b=d("react-compiler-runtime").c(12),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.msg_pinned_messages_v2||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.msg_pinned_messages_v2).getKeyRange(a)},b[0]=e.tables.msg_pinned_messages_v2,b[1]=a,b[2]=g):g=b[2];var j;b[3]!==e||b[4]!==a?(j=[e,a],b[3]=e,b[4]=a,b[5]=j):j=b[5];g=d("ReQLSuspense").useArray(g,j,f.id+":27").length;b[6]!==e.tables.client_web_pinned_messages||b[7]!==a?(j=function(){return d("ReQL").fromTableAscending(e.tables.client_web_pinned_messages).getKeyRange(a)},b[6]=e.tables.client_web_pinned_messages,b[7]=a,b[8]=j):j=b[8];var k;b[9]!==e||b[10]!==a?(k=[e,a],b[9]=e,b[10]=a,b[11]=k):k=b[11];b=d("ReQLSuspense").useArray(j,k,f.id+":35").length;return g>=i||b>=i}g["default"]=a}),98);
__d("useMWTogglePinMessage",["I64","LSFactory","LSOptimisticSetPinnedMessageStoredProcedure","LSPinnedMessageState","MWPActor.react","MWPBumpEntityKey","MessengerWebUXLogger","ReQL","ServerTime","promiseDone","react","requireDeferred","useAsyncReStore","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback,k=c("requireDeferred")("MWLogMessageAction").__setRef("useMWTogglePinMessage");function a(a,b){var e=c("useAsyncReStore")(),g=c("useMWPIsMessagePinned")(a),h=a.messageId,l=a.senderId,m=a.threadKey,n=d("ServerTime").getMillis(),o=d("MWPActor.react").useActor(),p=c("MessengerWebUXLogger").useInteractionLogger();a=async function(){var a=await e,j=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(m));await a.runInTransaction(function(e){var f=g?c("LSPinnedMessageState").NOT_PINNED:c("LSPinnedMessageState").PINNED,q=g?"unpin_message":"pin_message",r=g?"unpin":"pin";b==="message_dot_menu"?(k.onReady(function(d){return c("promiseDone")(d.log(a,h,m,b,r,void 0,void 0,void 0,l,void 0,o))}),p==null||p({eventName:q,threadKey:m,threadType:j==null?void 0:j.threadType})):r==="unpin"&&b==="pinned_message_list_dot_menu"&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","unpin");return c("LSOptimisticSetPinnedMessageStoredProcedure")(c("LSFactory")(e),{messageId:h,pinnedTimestampMs:(i||(i=d("I64"))).of_int32(n),state:i.of_int32(f),threadKey:m})},"readwrite",void 0,void 0,f.id+":58")};return j(a,[o,e,g,m,n,b,h,l,p])}g.default=a}),98);
__d("MWPinMessageMenuItem.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWLSThread","MWPinnedMessagesDialogNUXFactoryRequireNUX.react","MWXMenuItem.react","promiseDone","react","useMAWToggleSecurePinMessage","useMWPIsMessagePinned","useMWPinnedMessageLimitReached","useMWTogglePinMessage","useMWXLazyDialog","useSharedNUX"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("MWPinnedMessageLimitReachedDialog.react").__setRef("MWPinMessageMenuItem.react");function a(a){var b=a.message,e=a.onClick,f=a.onPinCompleted,g=h._(/*BTDS*/"Przypnij"),i=h._(/*BTDS*/"Odepnij"),l=c("useMWPIsMessagePinned")(b),m=c("MWPinnedMessagesDialogNUXFactoryRequireNUX.react")();a=c("useMWXLazyDialog")(k);var n=a[0];a=d("MWLSThread").useThread(b.threadKey);a=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a==null?void 0:a.threadType);var o=c("useMWTogglePinMessage")(b,"message_dot_menu"),p=c("useMAWToggleSecurePinMessage")(b,"message_dot_menu"),q=a?p:o,r=c("useMWPinnedMessageLimitReached")(b.threadKey);a=c("useSharedNUX")("WEB_MSGR_PINNED_MESSAGES_NUX");var s=a[0];p=function(a){return m!=null?m({children:a,dialogProps:{onClose:function(){},pinMessageHandler:function(){return c("promiseDone")(q(),f)}}}):j.jsx(j.Fragment,{children:a(function(){return c("promiseDone")(q(),f)})})};o=function(a){return j.jsx(c("MWXMenuItem.react"),{"aria-haspopup":!l&&s?"dialog":void 0,onClick:function(d){if(r&&!l)return n({threadKey:b.threadKey},function(){});!l?a():c("promiseDone")(q());e&&e(l)},primaryText:l?i:g})};return p(o)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPinnedMessagesDialogNUXFactory.react",["JSResourceForInteraction","MWInboxPersistedUIState","declareNUXRequireable","react","useMWXLazyDialog","useSharedNUX"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useCallback,j=b.useMemo,k=c("JSResourceForInteraction")("MWPinnedMessagesDialogNUX.react").__setRef("MWPinnedMessagesDialogNUXFactory.react");function a(a){function b(b){var e=b.children,f=b.dialogProps;b=c("useSharedNUX")(a);var g=b[0],h=b[1];b=d("MWInboxPersistedUIState").usePersistedUIState(void 0,"__MWSimpleNux."+a+"__");b[0];var l=b[1],m=i(function(){l(void 0),h.onDismiss()},[h,l]),n=j(function(){return{onDismiss:m,pinMessageHandler:f.pinMessageHandler}},[f,m]);b=c("useMWXLazyDialog")(k);var o=b[0];b=function(){return o(n)};return g?e(b):e(f.pinMessageHandler)}b.displayName=b.name+" [from "+f.id+"]";return b}e=c("declareNUXRequireable")(a);g["default"]=e}),98);
__d("MWV2ChatHotlikeSoundsConfig",["bx"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("bx")).getURL(a("273031"));d=a.getURL(a("273032"));e=a.getURL(a("273039"));f=a.getURL(a("273040"));c=a.getURL(a("273033"));var h=a.getURL(a("273034")),i=a.getURL(a("273035")),j=a.getURL(a("273036")),k=a.getURL(a("273037"));a=a.getURL(a("273038"));g.hotlikeGrowMp3Url=b;g.hotlikeGrowOggUrl=d;g.hotlikePopMp3Url=e;g.hotlikePopOggUrl=f;g.hotlikeOutgoingLargeMp3Url=c;g.hotlikeOutgoingLargeOggUrl=h;g.hotlikeOutgoingMediumMp3Url=i;g.hotlikeOutgoingMediumOggUrl=j;g.hotlikeOutgoingSmallMp3Url=k;g.hotlikeOutgoingSmallOggUrl=a}),98);
__d("MWV2ChatHotlikeSounds",["LSHotEmojiSize","MWChatSettingsQuery","MWV2ChatHotlikeSoundsConfig","Sound"],(function(a,b,c,d,e,f,g){"use strict";var h=[(f=d("MWV2ChatHotlikeSoundsConfig")).hotlikeGrowMp3Url,f.hotlikeGrowOggUrl],i=[f.hotlikePopMp3Url,f.hotlikePopOggUrl],j=[f.hotlikeOutgoingSmallMp3Url,f.hotlikeOutgoingSmallOggUrl],k=[f.hotlikeOutgoingMediumMp3Url,f.hotlikeOutgoingMediumOggUrl],l=[f.hotlikeOutgoingLargeMp3Url,f.hotlikeOutgoingLargeOggUrl],m=!1;function a(){m=!1,o(h)}function n(){m=!0,d("Sound").stop(h)}function b(){n(),o(i)}function e(a){n(),a===c("LSHotEmojiSize").SMALL?o(j):a===c("LSHotEmojiSize").MEDIUM?o(k):a===c("LSHotEmojiSize").LARGE&&o(l)}function o(a){d("MWChatSettingsQuery").areChatTabsSoundsOn(function(b){var c=a===h&&m;!c&&b!=null&&b===!0&&d("Sound").play(a,void 0,!1)})}g.start=a;g.pop=b;g.snap=e}),98);
__d("MWV2ForwardMenuItem.react",["fbt","I64","LSMessagingThreadTypeUtil","MWPActor.react","MWXMenuItem.react","MessengerWebUXLogger","WebUserFlowLoggingDataContextProvider.react","justknobx","react","react-compiler-runtime","useMWV2MessageForwardAction","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useContext;function a(a){var b=d("react-compiler-runtime").c(14),e=a.message,f=a.threadType,g=c("MessengerWebUXLogger").useInteractionLogger();a=l(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext);var i=a.setLoggingData,m=d("MWPActor.react").useActor();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("justknobx")._("4219"),b[0]=a):a=b[0];a=a;var n;b[1]!==f?(n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f),b[1]=f,b[2]=n):n=b[2];n=n;var o=c("useMWV2MessageForwardAction")(n,e,f);b[3]!==m||b[4]!==o||b[5]!==g||b[6]!==e||b[7]!==i||b[8]!==f?(n=function(){var a=e.threadKey,b=(j||(j=d("I64"))).equal(e.senderId,m);b={extraData:{actor_type:b?"sender":"receiver",component:"MWV2ForwardMenuItem"},flowInstanceId:c("uuidv4")(),threadKey:a,threadType:f};g==null||g(babelHelpers["extends"]({},b,{eventName:"open_forward_message_dialog"}));i(b);o()},b[3]=m,b[4]=o,b[5]=g,b[6]=e,b[7]=i,b[8]=f,b[9]=n):n=b[9];n=n;var p;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._(/*BTDS*/"Prze\u015blij"),b[10]=p):p=b[10];p=p;b[11]!==o||b[12]!==n?(a=a?k.jsx(c("MWXMenuItem.react"),{"aria-label":p,onClick:n,primaryText:p,testid:void 0}):k.jsx(c("MWXMenuItem.react"),{"aria-label":p,loggingEvent:"open_forward_message_dialog",onClick:o,primaryText:p,testid:void 0}),b[11]=o,b[12]=n,b[13]=a):a=b[13];return a}g["default"]=a}),226);
__d("useMWLSMessageReportingToken",["I64","Int64Hooks","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=d("react-compiler-runtime").c(4),e,f;c[0]!==a||c[1]!==b?(e=function(){return btoa("message_thread:"+(h||(h=d("I64"))).to_string(b)+":"+a)},f=[a,b],c[0]=a,c[1]=b,c[2]=e,c[3]=f):(e=c[2],f=c[3]);return d("Int64Hooks").useMemoInt64(e,f)}g["default"]=a}),98);
__d("MWV2GlobalReportMessageMenuItem.react",["fbt","CometFRX.entrypoint","LSMessagingThreadTypeUtil","MWReportingUtils","MWXMenuItem.react","react","react-compiler-runtime","useMWLSMessageReportingToken","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(a){var b=d("react-compiler-runtime").c(15),e=a.icon,f=a.messageId,g=a.threadKey;a=a.threadType;var i;b[0]!==a?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),b[0]=a,b[1]=i):i=b[1];i=i;f=c("useMWLSMessageReportingToken")(f,g);var k="report_long_press";a=d("MWReportingUtils").useGetNFXStoryLocationType(a);var l;b[2]!==i||b[3]!==f?(l=i?window.btoa("message_thread:encrypted"):f,b[2]=i,b[3]=f,b[4]=l):l=b[4];b[5]!==a||b[6]!==l?(i={entryPoint:k,id:l,location:a},b[5]=a,b[6]=l,b[7]=i):i=b[7];f=i;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._(/*BTDS*/"Zg\u0142o\u015b"),b[8]=k):k=b[8];a=k;l=c("useMWXEntryPointDialog")(c("CometFRX.entrypoint"),f);var m=l[0];b[9]!==m||b[10]!==g?(i=function(){m({threadKey:g})},b[9]=m,b[10]=g,b[11]=i):i=b[11];k=i;b[12]!==e||b[13]!==k?(f=j.jsx(c("MWXMenuItem.react"),{"aria-label":a,icon:e,loggingEvent:"report_thread",onClick:k,primaryText:a}),b[12]=e,b[13]=k,b[14]=f):f=b[14];return f}g["default"]=a}),226);
__d("MWV2MessageReactionMenuItem.react",["fbt","MWChatReactionsActionContainer.react","MWV2MessageRowActionsContext.react","MWXMenuItem.react","ODS","emptyFunction","react","useMWChatReactionsActionContainerProps.react","useMWV2ShouldDisableReactions.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect;function a(a){var b=a.closeActionsMenu,e=a.message,f=a.onReactionsSendLogger,g=a.reactionsPopoverResource;a=a.threadType;var i=h._(/*BTDS*/"Zareaguj"),n=c("useMWV2ShouldDisableReactions.react")(a,e.threadKey),o=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),p=o.openReactionsMenu,q=l(function(){p.current=c("emptyFunction");return},[p]);m(function(){return q},[q]);o=c("useMWChatReactionsActionContainerProps.react")(e,b,a,f,c("emptyFunction"),g);return n?null:k.jsx(c("MWChatReactionsActionContainer.react"),babelHelpers["extends"]({},o,{children:function(a,b,e,f,g,h){e=function(){b(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")};p.current=e;return k.jsx(c("MWXMenuItem.react"),{"aria-label":i,loggingEvent:"click_react_to_message",onClick:e,onHoverIn:f,onHoverOut:g,onPressIn:h,preventClosingMenuOnSelect:!0,primaryText:i,ref:a})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2RemoveMenuItem.react",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSDeleteMessageStoredProcedure","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWMessageDeliveryStatus","MWPActor.react","MWV2LogMessageClick","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXMenuItem.react","MessengerWebUXLogger","WebUserFlowLoggingDataContextProvider.react","gkx","isDeliveryStatusErrorState","mwCMIsAnyCMThread","promiseDone","react","react-compiler-runtime","useGetMediaGroupInformation","useHandleRemoveLocalMessage","useIsSecureMessage","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useContext,o=b.useRef,p=c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2RemoveMenuItem.react");function a(a){var b=d("react-compiler-runtime").c(61),e=a.canRemoveMessageGlobally,g=a.canRemoveMessageLocally,l=a.hasUnremovablelSubthread,q=a.learnMoreOnMessageRemove,r=a.message,s=a.onRemoveMessageLogger,t=a.threadType;a=a.title;l=l===void 0?!1:l;var u=(i||(i=c("useReStore")))(),v=r.messageId,w=r.threadKey,x;b[0]!==t?(x={fallbackThreadType:t},b[0]=t,b[1]=x):x=b[1];x=c("useIsSecureMessage")(u,r,x);x=c("useGetMediaGroupInformation")(r,x);var y;b[2]!==r.sendStatusV2||b[3]!==t?(y=c("mwCMIsAnyCMThread")(t)&&(j||(j=d("I64"))).equal(r.sendStatusV2,(k||(k=d("LSIntEnum"))).ofNumber(4)),b[2]=r.sendStatusV2,b[3]=t,b[4]=y):y=b[4];var z=y,A;b[5]!==u||b[6]!==v||b[7]!==w?(y=function(){c("promiseDone")(u.runInTransaction(function(a){return c("LSDeleteMessageStoredProcedure")(c("LSFactory")(a),{messageId:v,threadKey:w})},"readwrite",void 0,void 0,f.id+":81"))},A=[u,w,v],b[5]=u,b[6]=v,b[7]=w,b[8]=y,b[9]=A):(y=b[8],A=b[9]);var B=d("Int64Hooks").useCallbackInt64(y,A);y=o(null);A=d("MWPActor.react").useActor();var C;b[10]!==A||b[11]!==r.senderId?(C=(j||(j=d("I64"))).equal(r.senderId,A),b[10]=A,b[11]=r.senderId,b[12]=C):C=b[12];var D=C;A=D&&e;b[13]!==q||b[14]!==r||b[15]!==a?(C={learnMoreOnMessageRemove:q,message:r,title:a},b[13]=q,b[14]=r,b[15]=a,b[16]=C):C=b[16];var E=C;b[17]!==e||b[18]!==g||b[19]!==q||b[20]!==r||b[21]!==s||b[22]!==t||b[23]!==a?(C={canRemoveMessageGlobally:e,canRemoveMessageLocally:g,learnMoreOnMessageRemove:q,message:r,removeLogger:s,threadType:t,title:a},b[17]=e,b[18]=g,b[19]=q,b[20]=r,b[21]=s,b[22]=t,b[23]=a,b[24]=C):C=b[24];var F=C,G=c("MessengerWebUXLogger").useInteractionLogger();e=n(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext);var H=e.setLoggingData;b[25]===Symbol["for"]("react.memo_cache_sentinel")?(g={},b[25]=g):g=b[25];q=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),g);var I=q[0];a=c("useMWXLazyDialog")(p);var J=a[0],K=c("useHandleRemoveLocalMessage")(t,r,s);b[26]!==F||b[27]!==E||b[28]!==D||b[29]!==r.isUnsent||b[30]!==r.sendStatusV2||b[31]!==K||b[32]!==J||b[33]!==I||b[34]!==t?(C=function(a){if(c("isDeliveryStatusErrorState")(d("MWMessageDeliveryStatus").getFromSendStatus(r.sendStatusV2))){K(a);return}d("MWCMThreadTypes.react").isJoinedCMThread(t)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(t)||D&&!c("gkx")("24140")&&!r.isUnsent||d("LSMessagingThreadTypeUtil").isCMSubthread(t)?I(E):J(F)},b[26]=F,b[27]=E,b[28]=D,b[29]=r.isUnsent,b[30]=r.sendStatusV2,b[31]=K,b[32]=J,b[33]=I,b[34]=t,b[35]=C):C=b[35];var L=C;b[36]!==u||b[37]!==B||b[38]!==z||b[39]!==D||b[40]!==G||b[41]!==r||b[42]!==L||b[43]!==H||b[44]!==w||b[45]!==t?(e=function(){var a={extraData:{actor_type:D?"sender":"receiver"},flowInstanceId:c("uuidv4")(),threadKey:w,threadType:t};G==null||G(babelHelpers["extends"]({},a,{eventName:"message_remove_attempt"}));H(a);d("MWV2LogMessageClick").log(u,r,45);return r.subscriptErrorMessage!=null&&z?B():L(a)},b[36]=u,b[37]=B,b[38]=z,b[39]=D,b[40]=G,b[41]=r,b[42]=L,b[43]=H,b[44]=w,b[45]=t,b[46]=e):e=b[46];g=e;b[47]!==A?(q=A?h._(/*BTDS*/"Cofnij wys\u0142anie wiadomo\u015bci"):h._(/*BTDS*/"Usu\u0144 wiadomo\u015b\u0107"),b[47]=A,b[48]=q):q=b[48];b[49]!==A?(a=A?h._(/*BTDS*/"Cofnij wys\u0142anie"):h._(/*BTDS*/"Usu\u0144"),b[49]=A,b[50]=a):a=b[50];b[51]!==l||b[52]!==D||b[53]!==x?(s=x!=null&&(x!=null&&x.hasMissingMessages||x!=null&&x.hasMissingMedia)?D?h._(/*BTDS*/"Wys\u0142anie nie zostanie cofni\u0119te w przypadku obraz\u00f3w, kt\u00f3rych nie uda\u0142o si\u0119 wczyta\u0107"):h._(/*BTDS*/"Obrazy, kt\u00f3rych nie uda\u0142o si\u0119 wczyta\u0107, nie zostan\u0105 usuni\u0119te"):l?h._(/*BTDS*/"Nie mo\u017cna usuwa\u0107 wiadomo\u015bci z czatami pobocznymi"):void 0,b[51]=l,b[52]=D,b[53]=x,b[54]=s):s=b[54];b[55]!==g||b[56]!==l||b[57]!==q||b[58]!==a||b[59]!==s?(C=m.jsx(c("MWXMenuItem.react"),{"aria-label":q,disabled:l,onClick:g,primaryText:a,ref:y,secondaryText:s,testid:void 0}),b[55]=g,b[56]=l,b[57]=q,b[58]=a,b[59]=s,b[60]=C):C=b[60];return C}g["default"]=a}),226);
__d("MWV2ReplyMenuItem.react",["fbt","MWPReplyContext.react","MWXMenuItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=d("react-compiler-runtime").c(8),e=a.message;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Odpowiedz"),b[0]=a):a=b[0];a=a;var f=k(d("MWPReplyContext.react").MWPReplyContext),g=f.setReply;b[1]!==e.messageId||b[2]!==e.offlineThreadingId||b[3]!==e.sendStatusV2||b[4]!==e.threadKey||b[5]!==e.timestampMs||b[6]!==g?(f=j.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:function(){return g({messageId:e.messageId,offlineThreadingId:e.offlineThreadingId,sendStatusV2:e.sendStatusV2,threadKey:e.threadKey,timestampMs:e.timestampMs},e.threadKey)},primaryText:a,testid:void 0}),b[1]=e.messageId,b[2]=e.offlineThreadingId,b[3]=e.sendStatusV2,b[4]=e.threadKey,b[5]=e.timestampMs,b[6]=g,b[7]=f):f=b[7];return f}g["default"]=a}),226);
__d("useReStoreIfAvailable",["useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=c("useReStore")))()}g["default"]=a}),98);
__d("useMWV2ReportMessage.react",["fbt","I64","LSFactory","LSIntEnum","LSInternetConnectionState","LSReportMessageInCommunityChannelStoredProcedure","ReQL","promiseDone","react","react-compiler-runtime","useMWXConfirmationDialog","useMWXPushToast","useReStoreIfAvailable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;(i||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(10),f=c("useReStoreIfAvailable")(),g=c("useMWXConfirmationDialog")(),i;e[0]!==a?(i=(j||(j=d("I64"))).isI64(a)?a:(j||(j=d("I64"))).of_string(a),e[0]=a,e[1]=i):i=e[1];var l=i,m=c("useMWXPushToast")();e[2]!==f||e[3]!==l||e[4]!==b||e[5]!==m?(a=function(){if(f==null)return;c("promiseDone")(async function(){await f.runInTransaction(function(a){return c("LSReportMessageInCommunityChannelStoredProcedure")(c("LSFactory")(a),{messageId:b,threadKey:l})},"readwrite");var a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.connectivity_status));a!=null&&(j||(j=d("I64"))).equal(a.internetConnectionState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED))&&m({body:h._(/*BTDS*/"Wiadomo\u015b\u0107 zosta\u0142a przez Ciebie zg\u0142oszona administratorom grupy.")})}())},e[2]=f,e[3]=l,e[4]=b,e[5]=m,e[6]=a):a=e[6];var n=a;e[7]!==n||e[8]!==g?(i=function(){return g({body:h._(/*BTDS*/"Je\u015bli zg\u0142osisz t\u0119 wiadomo\u015b\u0107, zostanie ona przes\u0142ana administratorom grupy do weryfikacji."),confirm:h._(/*BTDS*/"Zg\u0142o\u015b"),title:h._(/*BTDS*/"Zg\u0142osi\u0107 wiadomo\u015b\u0107 administratorom grupy?")},n)},e[7]=n,e[8]=g,e[9]=i):i=e[9];a=i;return a}g.default=a}),226);
__d("MWV2ReportMessageMenuItem.react",["fbt","CometFRX.entrypoint","MWXMenuItem.react","gkx","react","react-compiler-runtime","useMWLSMessageReportingToken","useMWV2ReportMessage.react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.isSubthread;a=a.message;e=e===void 0?!1:e;var f=c("useMWLSMessageReportingToken")(a.messageId,a.threadKey);e=e?"messenger_community_messaging_subthread_view":"messenger_community_messaging_group_thread_details";var g;b[0]!==f||b[1]!==e?(g={entryPoint:"groups_report_long_press_to_admin",id:f,location:e},b[0]=f,b[1]=e,b[2]=g):g=b[2];f=c("useMWXEntryPointDialog")(c("CometFRX.entrypoint"),g);var i=f[0];e=c("useMWV2ReportMessage.react")(a.threadKey,a.messageId);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Zg\u0142o\u015b administratorom grupy"),b[3]=g):g=b[3];f=g;a=c("gkx")("24042");b[4]!==e||b[5]!==i?(g=a?function(){return i({})}:e,b[4]=e,b[5]=i,b[6]=g):g=b[6];b[7]!==g?(a=j.jsx(c("MWXMenuItem.react"),{"aria-label":f,onClick:g,primaryText:f,testid:void 0}),b[7]=g,b[8]=a):a=b[8];return a}g["default"]=a}),226);
__d("MWV2ReportMessageToFBMenuItem.react",["CometFRX.entrypoint","MWXMenuItem.react","react","react-compiler-runtime","useMWLSMessageReportingToken","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a.icon,f=a.isSubthread,g=a.menuItemLabel,h=a.messageId,j=a.onReportLogger;a=a.threadKey;f=f===void 0?!1:f;h=c("useMWLSMessageReportingToken")(h,a);a=f?"messenger_community_messaging_subthread_view":"messenger_community_messaging_group_thread_details";b[0]!==h||b[1]!==a?(f={entryPoint:"report_long_press",id:h,location:a},b[0]=h,b[1]=a,b[2]=f):f=b[2];h=f;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[3]=a):a=b[3];var k=a;f=h;a=c("useMWXEntryPointDialog")(c("CometFRX.entrypoint"),f);var l=a[0];b[4]!==l?(h=function(){return l(k)},b[4]=l,b[5]=h):h=b[5];var m=h;b[6]!==j||b[7]!==m?(f=function(){j&&j(),m()},b[6]=j,b[7]=m,b[8]=f):f=b[8];b[9]!==e||b[10]!==g||b[11]!==f?(a=i.jsx(c("MWXMenuItem.react"),{"aria-label":g,icon:e,onClick:f,primaryText:g}),b[9]=e,b[10]=g,b[11]=f,b[12]=a):a=b[12];return a}g["default"]=a}),98);
__d("getIsMessageTimeBelowEditThreshold",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).of_int32(15*60);function a(a,b){a=(h||(h=d("I64"))).div(a,h.of_int32(1e3));b=h.div(b,h.of_int32(1e3));a=h.sub(a,b);return h.lt(a,i)}g.MAX_EDIT_TIME_PERIOD_IN_SECONDS=i;g.getIsMessageTimeBelowEditThreshold=a}),98);
__d("useMWPCanUserEditMessage",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactTypeExact","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWMessageDeliveryStatus","MWPActor.react","ReQL","ReQLSuspense","URLMatcher","getIsMessageTimeBelowEditThreshold","gkx","isDeliveryStatusErrorState","isMWBumpMessage","isStringNullOrEmpty","mwCMIsAnyCMThread","mwCMIsCMSubthread","react-compiler-runtime","useMWGetOtherUserContact","useMWIsContactRestricted","useReStore","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=5;function a(a,b,e){var g,m,n=d("react-compiler-runtime").c(42),o=d("MWPActor.react").useActor(),p=(j||(j=c("useReStore")))(),q;n[0]!==p.tables.attachments||n[1]!==a.messageId||n[2]!==a.threadKey?(q=function(){return d("ReQL").fromTableAscending(p.tables.attachments).getKeyRange(a.threadKey,a.messageId)},n[0]=p.tables.attachments,n[1]=a.messageId,n[2]=a.threadKey,n[3]=q):q=n[3];var r;n[4]!==p||n[5]!==a.messageId||n[6]!==a.threadKey?(r=[p,a.messageId,a.threadKey],n[4]=p,n[5]=a.messageId,n[6]=a.threadKey,n[7]=r):r=n[7];q=d("ReQLSuspense").useFirst(q,r,f.id+":68");n[8]===Symbol["for"]("react.memo_cache_sentinel")?(r=["contactTypeExact"].concat(d("LSContactBitOffset").contactCapabilityFields),n[8]=r):r=n[8];r=c("useMWGetOtherUserContact")(a.threadKey,b.threadType,r);var s;n[9]!==r?(s=r!=null&&(h||(h=d("I64"))).equal(r.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_KID)),n[9]=r,n[10]=s):s=n[10];s=s;r=c("useMWIsContactRestricted")(r);e=d("MAWThreadCutover").useIsCutoverOpenThread(e);var t=c("useServerTime")();if(c("isDeliveryStatusErrorState")(d("MWMessageDeliveryStatus").getFromSendStatus(a.sendStatusV2)))return!1;if(b==null)return!1;g=(h||(h=d("I64"))).to_int32((g=a.editCount)!=null?g:(h||(h=d("I64"))).zero)<k;var u;n[11]!==a.timestampMs||n[12]!==t?(u=d("getIsMessageTimeBelowEditThreshold").getIsMessageTimeBelowEditThreshold((h||(h=d("I64"))).of_float(t.getTime()),a.timestampMs),n[11]=a.timestampMs,n[12]=t,n[13]=u):u=n[13];t=u;n[14]!==o||n[15]!==a.senderId?(u=(h||(h=d("I64"))).equal(a.senderId,o),n[14]=o,n[15]=a.senderId,n[16]=u):u=n[16];o=u;u=(u=a.isForwarded)!=null?u:!1;var v=a.text!=null&&a.text!=="",w=a.text!=null&&c("URLMatcher").match(a.text)!=null;m=(m=a.hotEmojiSize)!=null?m:(h||(h=d("I64"))).zero;var x;n[17]!==m?(x=(h||(h=d("I64"))).equal(m,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)),n[17]=m,n[18]=x):x=n[18];m=x;if(n[19]!==(q==null?void 0:q.hasXma)||n[20]!==a.mentionIds){x=((x=q==null?void 0:q.hasXma)!=null?x:!1)||!c("isStringNullOrEmpty")(a.mentionIds);n[19]=q==null?void 0:q.hasXma;n[20]=a.mentionIds;n[21]=x}else x=n[21];q=x;n[22]!==a.authorityLevel||n[23]!==a.isUnsent?(x=a.isUnsent===!1&&(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),n[22]=a.authorityLevel,n[23]=a.isUnsent,n[24]=x):x=n[24];x=x;var y;n[25]!==a.replyType?(y=c("isMWBumpMessage")(a.replyType),n[25]=a.replyType,n[26]=y):y=n[26];y=y;var z;n[27]!==q||n[28]!==x||n[29]!==g||n[30]!==t||n[31]!==y||n[32]!==e||n[33]!==u||n[34]!==s||n[35]!==r||n[36]!==o||n[37]!==w||n[38]!==v||n[39]!==m||n[40]!==b?(z=g&&t&&o&&v&&!w&&m&&!u&&!e&&!q&&x&&!r&&!y&&!s&&l(b),n[27]=q,n[28]=x,n[29]=g,n[30]=t,n[31]=y,n[32]=e,n[33]=u,n[34]=s,n[35]=r,n[36]=o,n[37]=w,n[38]=v,n[39]=m,n[40]=b,n[41]=z):z=n[41];return z}function l(a){var b=a.threadType;if(d("LSMessagingThreadTypeUtil").isWorkThread(a.threadSubtype))return!1;if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(b))return!0;if(d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(b))return!0;if(c("mwCMIsAnyCMThread")(b)||c("mwCMIsCMSubthread")(b))return d("LSThreadBitOffset").has(194,a)&&c("gkx")("7675");return d("LSMessagingThreadTypeUtil").isOpenFnFThread(a)?!0:!1}g["default"]=a}),98);
__d("useSubthreadShouldShowReplyCTAForMessage",["ChatGeminiDisplayContextProvider.react","gkx","react-compiler-runtime","useSubthreadInfoSafeForNonWork"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("react-compiler-runtime").c(3);a=c("useSubthreadInfoSafeForNonWork")(a,b);b=d("ChatGeminiDisplayContextProvider.react").useChatGeminiDisplayContext();b=c("gkx")("16795")&&(b==null?void 0:b.displaySurface)!=="subthread"&&a!=null;var f;e[0]!==b||e[1]!==a?(f={shouldShowSubthreadCTA:b,subthread:a},e[0]=b,e[1]=a,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("MWV2ContextualActionsMenu.react",["fbt","BusinessMessageNegativeFeedbackMenuItem.react","BusinessMessagePositiveFeedbackMenuItem.react","FDSMenuSeparator.react","I64","LSIntEnum","LSMessagingThreadTypeUtil","MAWEditMenuItem.react","MWBroadcastChannelLoggingShapes","MWCMCreateSubthreadMenuItem.react","MWChatMessageBothOrientationFocusGroup.react","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWLogBroadcastChannelFalcoEvent","MWPActor.react","MWPAttachmentDataContext","MWPThreadCapabilitiesContext","MWPinMessageMenuItem.react","MWV2ForwardMenuItem.react","MWV2GlobalReportMessageMenuItem.react","MWV2MessageReactionMenuItem.react","MWV2RemoveMenuItem.react","MWV2ReplyMenuItem.react","MWV2ReportMessageMenuItem.react","MWV2ReportMessageToFBMenuItem.react","MWXMenu.react","MWXPopover.react","MessagingAttachmentType","MessagingThreadSubtype","WebUXLoggingSurfaceContextProvider","cr:1111","cr:1200","cr:14125","cr:2243","cr:4140","cr:5790","cr:6934","cr:7089","cr:8074","cr:8087","focusScopeQueries","gkx","react","react-compiler-runtime","useMWEntrypoint","useMWFalcoFeatureEventLogger","useMWPCanUserEditMessage","useSubthreadShouldShowReplyCTAForMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a,b){a=d("react-compiler-runtime").c(1);a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={messageKeys:null,reactionsKeys:null},a[0]=b):b=a[0];return b}var m=(f=b("cr:8087"))!=null?f:a;function e(a){var e=d("react-compiler-runtime").c(126),f=a.attachment,g=a.canRemoveMessageGlobally,i=a.canRemoveMessageLocally,n=a.containerThreadKey,o=a.extraActions,p=a.isOutgoing,q=a.isSecureMessage,r=a.learnMoreOnMessageRemove,s=a.message,t=a.onClose,u=a.onRemoveMessageLogger,v=a.removeMessageDialogTitle,w=a.showBumpActionInContextualMenu,x=a.showBusinessMessageFeedbackOptionsInContextualMenu,y=a.showCreateSubthread,z=a.showFeedbackOptionsInContextualMenu,A=a.showForwardActionInContextualMenu,B=a.showPinMessageActionInContextualMenu,C=a.showReactionInContextualMenu,D=a.showReplyActionInContextualMenu,E=a.showReportCommunityMessageToAdmin,F=a.showReportCommunityMessageToFacebook,G=a.showReportMessageToFacebook,H=a.showUnsendInContextualMenu,I=a.thread;a=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();a=a.blurMediaEnabled;a=c("gkx")("24098")&&a;var J;e[0]!==f?(J=f!=null?(j||(j=d("I64"))).equal(f.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):!1,e[0]=f,e[1]=J):J=e[1];J=J;var K;e[2]!==f?(K=f!=null?(j||(j=d("I64"))).equal(f.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):!1,e[2]=f,e[3]=K):K=e[3];K=K;a=a&&(J||K);e[4]!==I?(K=d("LSMessagingThreadTypeUtil").isOpenFnFThread(I),e[4]=I,e[5]=K):K=e[5];K=K;var L=c("useMWEntrypoint")(),M=I==null?void 0:I.threadType,N=I==null?void 0:I.threadSubtype,O=c("useMWFalcoFeatureEventLogger")(s.threadKey,M),P=c("useSubthreadShouldShowReplyCTAForMessage")(s.threadKey,s.messageId);P=P.shouldShowSubthreadCTA;var Q=d("MWPActor.react").useActor();Q=(j||(j=d("I64"))).equal(s.senderId,Q);Q=Q&&!((Q=s.isUnsent)!=null?Q:!1);P=P&&!Q;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(Q=h._(/*BTDS*/"Wi\u0119cej dzia\u0142a\u0144"),e[6]=Q):Q=e[6];Q=Q;var R;e[7]!==N?(R=N!=null&&(j||(j=d("I64"))).equal(N,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").SUPPORT_MESSAGING_THREAD)),e[7]=N,e[8]=R):R=e[8];N=R;R=c("useMWPCanUserEditMessage")(s,I,n);e[9]!==I.threadType?(n=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(I.threadType),e[9]=I.threadType,e[10]=n):n=e[10];var S=n;n=d("MWEncryptedBackupsSharedState").useEBSharedStateEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").VERIFY_KEYS_IN_CHAT_ENABLED);n=n[0];n=n==="true";var T=m(s,q),U=T.messageKeys;T=T.reactionsKeys;var V=d("MWPAttachmentDataContext").useMWPGetAttachments(s);V=V.length===1;var W;e[11]!==f||e[12]!==J||e[13]!==V||e[14]!==K||e[15]!==s||e[16]!==I.threadType?(W=b("cr:7089")!=null&&J&&K&&f!=null&&V?l.jsx(b("cr:7089"),{attachment:f,message:s,threadType:I.threadType}):null,e[11]=f,e[12]=J,e[13]=V,e[14]=K,e[15]=s,e[16]=I.threadType,e[17]=W):W=e[17];e[18]!==s||e[19]!==a||e[20]!==D?(J=D&&!a?l.jsx(c("MWV2ReplyMenuItem.react"),{message:s}):null,e[18]=s,e[19]=a,e[20]=D,e[21]=J):J=e[21];e[22]!==s||e[23]!==t||e[24]!==C||e[25]!==M?(V=C?l.jsx(c("MWV2MessageReactionMenuItem.react"),{closeActionsMenu:t,message:s,threadType:M}):null,e[22]=s,e[23]=t,e[24]=C,e[25]=M,e[26]=V):V=e[26];e[27]!==s||e[28]!==R||e[29]!==M?(K=R?l.jsx(c("MAWEditMenuItem.react"),{message:s,threadType:M}):null,e[27]=s,e[28]=R,e[29]=M,e[30]=K):K=e[30];e[31]!==g||e[32]!==i||e[33]!==P||e[34]!==r||e[35]!==s||e[36]!==u||e[37]!==v||e[38]!==H||e[39]!==M?(a=H?l.jsx(c("MWV2RemoveMenuItem.react"),{canRemoveMessageGlobally:g,canRemoveMessageLocally:i,hasUnremovablelSubthread:P,learnMoreOnMessageRemove:r,message:s,onRemoveMessageLogger:u,threadType:M,title:v}):null,e[31]=g,e[32]=i,e[33]=P,e[34]=r,e[35]=s,e[36]=u,e[37]=v,e[38]=H,e[39]=M,e[40]=a):a=e[40];e[41]!==s||e[42]!==A||e[43]!==M?(D=A?l.jsx(c("MWV2ForwardMenuItem.react"),{message:s,threadType:M}):null,e[41]=s,e[42]=A,e[43]=M,e[44]=D):D=e[44];e[45]!==s||e[46]!==w||e[47]!==I.threadKey?(t=w&&b("cr:14125")?l.jsx(b("cr:14125"),{message:s,threadKey:I.threadKey}):null,e[45]=s,e[46]=w,e[47]=I.threadKey,e[48]=t):t=e[48];e[49]!==s||e[50]!==y?(C=y?l.jsx(c("MWCMCreateSubthreadMenuItem.react"),{message:s}):null,e[49]=s,e[50]=y,e[51]=C):C=e[51];e[52]!==L||e[53]!==S||e[54]!==O||e[55]!==s||e[56]!==B||e[57]!==I.threadKey?(R=B?l.jsx(c("MWPinMessageMenuItem.react"),{message:s,onClick:function(a){if(S){a=a?d("MWBroadcastChannelLoggingShapes").UNPIN_MESSAGE:d("MWBroadcastChannelLoggingShapes").PIN_MESSAGE;d("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent(babelHelpers["extends"]({},a,{threadFbid:I.threadKey}))}},onPinCompleted:function(){O(L,"pin_message")}}):null,e[52]=L,e[53]=S,e[54]=O,e[55]=s,e[56]=B,e[57]=I.threadKey,e[58]=R):R=e[58];e[59]!==s||e[60]!==E?(g=E?l.jsx(c("MWV2ReportMessageMenuItem.react"),{message:s}):null,e[59]=s,e[60]=E,e[61]=g):g=e[61];e[62]!==s.messageId||e[63]!==s.threadKey||e[64]!==F||e[65]!==M?(i=F?l.jsx(c("MWV2ReportMessageToFBMenuItem.react"),{isSubthread:d("LSMessagingThreadTypeUtil").isCMSubthread(M),menuItemLabel:h._(/*BTDS*/"Zg\u0142o\u015b"),messageId:s.messageId,threadKey:s.threadKey}):null,e[62]=s.messageId,e[63]=s.threadKey,e[64]=F,e[65]=M,e[66]=i):i=e[66];e[67]!==s.messageId||e[68]!==s.threadKey||e[69]!==G||e[70]!==M?(P=G?l.jsx(c("MWV2GlobalReportMessageMenuItem.react"),{messageId:s.messageId,threadKey:s.threadKey,threadType:M}):null,e[67]=s.messageId,e[68]=s.threadKey,e[69]=G,e[70]=M,e[71]=P):P=e[71];e[72]!==q||e[73]!==n||e[74]!==s||e[75]!==U||e[76]!==T?(r=n&&b("cr:8074")!=null&&q?l.jsxs(l.Fragment,{children:[l.jsx(c("FDSMenuSeparator.react"),{}),l.jsx(b("cr:8074"),{message:s,messageKeys:U,reactionsKeys:T})]}):null,e[72]=q,e[73]=n,e[74]=s,e[75]=U,e[76]=T,e[77]=r):r=e[77];e[78]!==s?(u=b("cr:5790")?l.jsx(b("cr:5790"),{message:s}):null,e[78]=s,e[79]=u):u=e[79];e[80]!==S||e[81]!==p||e[82]!==s?(v=b("cr:6934")!=null&&S&&!p&&l.jsx(b("cr:6934"),{message:s}),e[80]=S,e[81]=p,e[82]=s,e[83]=v):v=e[83];e[84]!==p||e[85]!==N||e[86]!==s?(H=b("cr:2243")!=null&&!p&&N&&l.jsx(b("cr:2243"),{message:s}),e[84]=p,e[85]=N,e[86]=s,e[87]=H):H=e[87];e[88]!==s||e[89]!==z?(A=b("cr:1200")!=null&&z&&l.jsx(b("cr:1200"),{message:s}),e[88]=s,e[89]=z,e[90]=A):A=e[90];e[91]!==s||e[92]!==z?(w=b("cr:1111")!=null&&z&&l.jsx(b("cr:1111"),{message:s}),e[91]=s,e[92]=z,e[93]=w):w=e[93];e[94]!==s||e[95]!==x?(y=c("BusinessMessagePositiveFeedbackMenuItem.react")!=null&&x&&l.jsx(c("BusinessMessagePositiveFeedbackMenuItem.react"),{message:s}),e[94]=s,e[95]=x,e[96]=y):y=e[96];e[97]!==s||e[98]!==x?(B=c("BusinessMessageNegativeFeedbackMenuItem.react")!=null&&x&&l.jsx(c("BusinessMessageNegativeFeedbackMenuItem.react"),{message:s}),e[97]=s,e[98]=x,e[99]=B):B=e[99];e[100]!==f||e[101]!==s?(E=b("cr:4140")?l.jsxs(l.Fragment,{children:[c("gkx")("731")?l.jsx(c("FDSMenuSeparator.react"),{}):null,l.jsx(b("cr:4140"),{attachment:f,message:s})]}):null,e[100]=f,e[101]=s,e[102]=E):E=e[102];e[103]!==o||e[104]!==K||e[105]!==a||e[106]!==D||e[107]!==t||e[108]!==C||e[109]!==R||e[110]!==g||e[111]!==i||e[112]!==P||e[113]!==r||e[114]!==u||e[115]!==v||e[116]!==H||e[117]!==A||e[118]!==w||e[119]!==y||e[120]!==B||e[121]!==E||e[122]!==W||e[123]!==J||e[124]!==V?(F=l.jsx(c("MWXPopover.react"),{role:"menu",withArrow:!0,children:l.jsx(d("MWChatMessageBothOrientationFocusGroup.react").keyCommands,{children:l.jsx(d("MWChatMessageBothOrientationFocusGroup.react").FocusGroup,{allowModifiers:!0,orientation:"both",preventScrollOnFocus:!1,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,children:l.jsx(c("MWXMenu.react"),{"aria-label":Q,size:"full",truncate:!0,children:l.jsxs(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_view_message_options",children:[W,J,V,K,a,D,t,C,R,g,i,P,r,u,v,H,A,w,y,B,o,E]})})})})}),e[103]=o,e[104]=K,e[105]=a,e[106]=D,e[107]=t,e[108]=C,e[109]=R,e[110]=g,e[111]=i,e[112]=P,e[113]=r,e[114]=u,e[115]=v,e[116]=H,e[117]=A,e[118]=w,e[119]=y,e[120]=B,e[121]=E,e[122]=W,e[123]=J,e[124]=V,e[125]=F):F=e[125];return F}g["default"]=e}),226);
__d("MWV2NegativeFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useGenAiNegativeFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useGenAiNegativeFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MWV2PositiveFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useGenAiPositiveFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useGenAiPositiveFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MessageThreadEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5034");b=d("FalcoLoggerInternal").create("message_thread_events",a);e=b;g["default"]=e}),98);
__d("MessagingAiAgentInteractionsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4183");b=d("FalcoLoggerInternal").create("messaging_ai_agent_interactions",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableChatClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1254");b=d("FalcoLoggerInternal").create("messenger_discoverable_chat_client_events",a);e=b;g["default"]=e}),98);
__d("MessengerGroupCreationEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6706");b=d("FalcoLoggerInternal").create("messenger_group_creation_events",a);e=b;g["default"]=e}),98);
__d("MetaAiIntentsImageEditingEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5317");b=d("FalcoLoggerInternal").create("meta_ai_intents_image_editing_events",a);e=b;g["default"]=e}),98);
__d("MwbGroupBlockeeMessagesTapToRevealActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5396");b=d("FalcoLoggerInternal").create("mwb_group_blockee_messages_tap_to_reveal_action",a);e=b;g["default"]=e}),98);
__d("XMDSToast.react",["CDSToast.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSToast.react"),Object.keys(d("CDSToast.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSToast.react")[a]})}),98);